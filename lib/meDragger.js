(()=>{"use strict";var t={d:(e,r)=>{for(var i in r)t.o(r,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:r[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>i});const r=function(t,e,r,i,n,a,d,o){var s,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=[],l._compiled=!0),s)if(l.functional){l._injectStyles=s;var g=l.render;l.render=function(t,e){return s.call(e),g(t,e)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,s):[s]}return{exports:t,options:l}}({name:"meDragger",props:{options:{type:Array,required:!0},idField:{type:String,required:!0},type:{type:String,default:"up-down"}},data:()=>({position:[],dragId:null,moving:!1,animateTime:200}),created(){},computed:{},methods:{dragstart(t){this.dragId=t.currentTarget.dataset.id},dragend(){this.dragId=null,this.$forceUpdate()},dragover(t){t.preventDefault();let e=t.currentTarget.dataset.id;if(!this.moving&&e!==this.dragId){let r=Array.from(this.$refs.root.querySelectorAll(".me-dragger>*"));this.position=r.map((t=>({id:t.dataset.id,top:t.getBoundingClientRect().top,left:t.getBoundingClientRect().left})));let i,n=t.clientX,a=t.clientY,d=t.currentTarget.getBoundingClientRect().left,o=t.currentTarget.getBoundingClientRect().top,s=t.currentTarget.clientWidth,l=t.currentTarget.clientHeight;i="up-down"===this.type?a>=o+l/2?"down":"up":n>=d+s/2?"right":"left";let g=this.options.findIndex((t=>t[this.idField]===this.dragId)),c=this.options[g],u=this.options.filter((t=>t[this.idField]!==this.dragId)),f=u.findIndex((t=>t[this.idField]===e));if("right"!==i&&"down"!==i||f++,g===f)return;this.moving=!0,u.splice(f,0,c),this.$emit("update:options",u),this.$nextTick((()=>{let t=Array.from(this.$refs.root.querySelectorAll(".me-dragger>*"));t.forEach((t=>{if(t.dataset.id===this.dragId)return;let e=t.getBoundingClientRect().top,r=t.getBoundingClientRect().left,i=this.position.find((e=>t.dataset.id===e.id));i&&(t.style.transform="translate(".concat(i.left-r,"px,").concat(i.top-e,"px)"))})),setTimeout((()=>{t.forEach((t=>{t.dataset.id!==this.dragId&&(t.style.transform="translate(0px,0px)",t.style.transition="transform ".concat(this.animateTime/1e3,"s"))}))}),0),setTimeout((()=>{t.forEach((t=>{t.dataset.id!==this.dragId&&(t.style.transform="",t.style.transition="")})),this.moving=!1}),this.animateTime)}))}},dealDom(){let t=Array.from(this.$refs.root.querySelectorAll(".me-dragger>*"));t.length&&t.forEach(((t,e)=>{t.draggable=!0,t.dataset.id=this.options[e][this.idField],t.style.opacity=t.dataset.id===this.dragId?.4:1,t.style.zIndex=t.dataset.id!==this.dragId?10:"auto",t.addEventListener("dragstart",this.dragstart),t.addEventListener("dragend",this.dragend),t.addEventListener("dragover",this.dragover)}))}},mounted(){this.dealDom()},updated(){this.dealDom()}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"root",staticClass:"me-dragger"},[t._t("default")],2)})).exports;r.install=function(t){t.component(r.name,r)};const i=r;module.exports=e})();