(()=>{var t={8491:(t,e,r)=>{var n=r(3637),i=r(9980),o=r(7745),s=n.TypeError;t.exports=function(t){if(i(t))return t;throw s(o(t)+" is not a function")}},7506:(t,e,r)=>{var n=r(3637),i=r(560),o=r(7745),s=n.TypeError;t.exports=function(t){if(i(t))return t;throw s(o(t)+" is not a constructor")}},5749:(t,e,r)=>{var n=r(3637),i=r(9980),o=n.String,s=n.TypeError;t.exports=function(t){if("object"==typeof t||i(t))return t;throw s("Can't set "+o(t)+" as a prototype")}},2804:(t,e,r)=>{var n=r(2253),i=r(5624),o=r(1276),s=n("unscopables"),a=Array.prototype;null==a[s]&&o.f(a,s,{configurable:!0,value:i(null)}),t.exports=function(t){a[s][t]=!0}},2355:(t,e,r)=>{var n=r(3637),i=r(3058),o=n.TypeError;t.exports=function(t,e){if(i(e,t))return t;throw o("Incorrect invocation")}},5572:(t,e,r)=>{var n=r(3637),i=r(2483),o=n.String,s=n.TypeError;t.exports=function(t){if(i(t))return t;throw s(o(t)+" is not an object")}},1891:(t,e,r)=>{var n=r(8396),i=r(7179),o=r(2210),s=function(t){return function(e,r,s){var a,c=n(e),u=o(c),h=i(s,u);if(t&&r!=r){for(;u>h;)if((a=c[h++])!=a)return!0}else for(;u>h;h++)if((t||h in c)&&c[h]===r)return t||h||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},9344:(t,e,r)=>{var n=r(2555);t.exports=n([].slice)},5698:(t,e,r)=>{var n=r(2253)("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},t(o)}catch(t){}return r}},9526:(t,e,r)=>{var n=r(2555),i=n({}.toString),o=n("".slice);t.exports=function(t){return o(i(t),8,-1)}},6161:(t,e,r)=>{var n=r(3637),i=r(7325),o=r(9980),s=r(9526),a=r(2253)("toStringTag"),c=n.Object,u="Arguments"==s(function(){return arguments}());t.exports=i?s:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=c(t),a))?r:u?s(e):"Object"==(n=s(e))&&o(e.callee)?"Arguments":n}},3650:(t,e,r)=>{"use strict";var n=r(2653),i=r(8491),o=r(5572);t.exports=function(){for(var t,e=o(this),r=i(e.delete),s=!0,a=0,c=arguments.length;a<c;a++)t=n(r,e,arguments[a]),s=s&&t;return!!s}},1962:(t,e,r)=>{var n=r(2270),i=r(9951),o=r(4216),s=r(1276);t.exports=function(t,e){for(var r=i(e),a=s.f,c=o.f,u=0;u<r.length;u++){var h=r[u];n(t,h)||a(t,h,c(e,h))}}},8982:(t,e,r)=>{var n=r(4088);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},4877:(t,e,r)=>{"use strict";var n=r(890).IteratorPrototype,i=r(5624),o=r(8156),s=r(8939),a=r(6160),c=function(){return this};t.exports=function(t,e,r){var u=e+" Iterator";return t.prototype=i(n,{next:o(1,r)}),s(t,u,!1,!0),a[u]=c,t}},4908:(t,e,r)=>{var n=r(4608),i=r(1276),o=r(8156);t.exports=n?function(t,e,r){return i.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},8156:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},1815:(t,e,r)=>{"use strict";var n=r(8224),i=r(2653),o=r(2626),s=r(6469),a=r(9980),c=r(4877),u=r(2827),h=r(4177),l=r(8939),v=r(4908),p=r(4493),f=r(2253),d=r(6160),m=r(890),g=s.PROPER,y=s.CONFIGURABLE,x=m.IteratorPrototype,w=m.BUGGY_SAFARI_ITERATORS,E=f("iterator"),b="keys",S="values",T="entries",L=function(){return this};t.exports=function(t,e,r,s,f,m,I){c(r,e,s);var O,A,R,_=function(t){if(t===f&&C)return C;if(!w&&t in M)return M[t];switch(t){case b:case S:case T:return function(){return new r(this,t)}}return function(){return new r(this)}},j=e+" Iterator",P=!1,M=t.prototype,F=M[E]||M["@@iterator"]||f&&M[f],C=!w&&F||_(f),N="Array"==e&&M.entries||F;if(N&&(O=u(N.call(new t)))!==Object.prototype&&O.next&&(o||u(O)===x||(h?h(O,x):a(O[E])||p(O,E,L)),l(O,j,!0,!0),o&&(d[j]=L)),g&&f==S&&F&&F.name!==S&&(!o&&y?v(M,"name",S):(P=!0,C=function(){return i(F,this)})),f)if(A={values:_(S),keys:m?C:_(b),entries:_(T)},I)for(R in A)(w||P||!(R in M))&&p(M,R,A[R]);else n({target:e,proto:!0,forced:w||P},A);return o&&!I||M[E]===C||p(M,E,C,{name:f}),d[e]=C,A}},4608:(t,e,r)=>{var n=r(4088);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},1896:(t,e,r)=>{var n=r(3637),i=r(2483),o=n.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},9363:t=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},2371:(t,e,r)=>{var n=r(1896)("span").classList,i=n&&n.constructor&&n.constructor.prototype;t.exports=i===Object.prototype?void 0:i},9255:t=>{t.exports="object"==typeof window},5626:(t,e,r)=>{var n=r(6880),i=r(3637);t.exports=/ipad|iphone|ipod/i.test(n)&&void 0!==i.Pebble},4091:(t,e,r)=>{var n=r(6880);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},2558:(t,e,r)=>{var n=r(9526),i=r(3637);t.exports="process"==n(i.process)},1629:(t,e,r)=>{var n=r(6880);t.exports=/web0s(?!.*chrome)/i.test(n)},6880:(t,e,r)=>{var n=r(5481);t.exports=n("navigator","userAgent")||""},1943:(t,e,r)=>{var n,i,o=r(3637),s=r(6880),a=o.process,c=o.Deno,u=a&&a.versions||c&&c.version,h=u&&u.v8;h&&(i=(n=h.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(i=+n[1]),t.exports=i},5994:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8224:(t,e,r)=>{var n=r(3637),i=r(4216).f,o=r(4908),s=r(4493),a=r(5815),c=r(1962),u=r(501);t.exports=function(t,e){var r,h,l,v,p,f=t.target,d=t.global,m=t.stat;if(r=d?n:m?n[f]||a(f,{}):(n[f]||{}).prototype)for(h in e){if(v=e[h],l=t.noTargetGet?(p=i(r,h))&&p.value:r[h],!u(d?h:f+(m?".":"#")+h,t.forced)&&void 0!==l){if(typeof v==typeof l)continue;c(v,l)}(t.sham||l&&l.sham)&&o(v,"sham",!0),s(r,h,v,t)}}},4088:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},6307:t=>{var e=Function.prototype,r=e.apply,n=e.bind,i=e.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?i.bind(r):function(){return i.apply(r,arguments)})},983:(t,e,r)=>{var n=r(2555),i=r(8491),o=n(n.bind);t.exports=function(t,e){return i(t),void 0===e?t:o?o(t,e):function(){return t.apply(e,arguments)}}},2653:t=>{var e=Function.prototype.call;t.exports=e.bind?e.bind(e):function(){return e.apply(e,arguments)}},6469:(t,e,r)=>{var n=r(4608),i=r(2270),o=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,u=a&&(!n||n&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},2555:t=>{var e=Function.prototype,r=e.bind,n=e.call,i=r&&r.bind(n);t.exports=r?function(t){return t&&i(n,t)}:function(t){return t&&function(){return n.apply(t,arguments)}}},5481:(t,e,r)=>{var n=r(3637),i=r(9980),o=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(n[t]):n[t]&&n[t][e]}},9539:(t,e,r)=>{var n=r(6161),i=r(5893),o=r(6160),s=r(2253)("iterator");t.exports=function(t){if(null!=t)return i(t,s)||i(t,"@@iterator")||o[n(t)]}},9596:(t,e,r)=>{var n=r(3637),i=r(2653),o=r(8491),s=r(5572),a=r(7745),c=r(9539),u=n.TypeError;t.exports=function(t,e){var r=arguments.length<2?c(t):e;if(o(r))return s(i(r,t));throw u(a(t)+" is not iterable")}},5215:(t,e,r)=>{var n=r(2653);t.exports=function(t){return n(Map.prototype.entries,t)}},5893:(t,e,r)=>{var n=r(8491);t.exports=function(t,e){var r=t[e];return null==r?void 0:n(r)}},3637:(t,e,r)=>{var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},2270:(t,e,r)=>{var n=r(2555),i=r(6410),o=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(i(t),e)}},4736:t=>{t.exports={}},4187:(t,e,r)=>{var n=r(3637);t.exports=function(t,e){var r=n.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,e))}},2811:(t,e,r)=>{var n=r(5481);t.exports=n("document","documentElement")},6962:(t,e,r)=>{var n=r(4608),i=r(4088),o=r(1896);t.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},6767:(t,e,r)=>{var n=r(3637),i=r(2555),o=r(4088),s=r(9526),a=n.Object,c=i("".split);t.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"==s(t)?c(t,""):a(t)}:a},6010:(t,e,r)=>{var n=r(2555),i=r(9980),o=r(6799),s=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},3362:(t,e,r)=>{var n,i,o,s=r(2996),a=r(3637),c=r(2555),u=r(2483),h=r(4908),l=r(2270),v=r(6799),p=r(537),f=r(4736),d="Object already initialized",m=a.TypeError,g=a.WeakMap;if(s||v.state){var y=v.state||(v.state=new g),x=c(y.get),w=c(y.has),E=c(y.set);n=function(t,e){if(w(y,t))throw new m(d);return e.facade=t,E(y,t,e),e},i=function(t){return x(y,t)||{}},o=function(t){return w(y,t)}}else{var b=p("state");f[b]=!0,n=function(t,e){if(l(t,b))throw new m(d);return e.facade=t,h(t,b,e),e},i=function(t){return l(t,b)?t[b]:{}},o=function(t){return l(t,b)}}t.exports={set:n,get:i,has:o,enforce:function(t){return o(t)?i(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=i(e)).type!==t)throw m("Incompatible receiver, "+t+" required");return r}}}},641:(t,e,r)=>{var n=r(2253),i=r(6160),o=n("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[o]===t)}},9980:t=>{t.exports=function(t){return"function"==typeof t}},560:(t,e,r)=>{var n=r(2555),i=r(4088),o=r(9980),s=r(6161),a=r(5481),c=r(6010),u=function(){},h=[],l=a("Reflect","construct"),v=/^\s*(?:class|function)\b/,p=n(v.exec),f=!v.exec(u),d=function(t){if(!o(t))return!1;try{return l(u,h,t),!0}catch(t){return!1}};t.exports=!l||i((function(){var t;return d(d.call)||!d(Object)||!d((function(){t=!0}))||t}))?function(t){if(!o(t))return!1;switch(s(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return f||!!p(v,c(t))}:d},501:(t,e,r)=>{var n=r(4088),i=r(9980),o=/#|\.prototype\./,s=function(t,e){var r=c[a(t)];return r==h||r!=u&&(i(e)?n(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",h=s.POLYFILL="P";t.exports=s},2483:(t,e,r)=>{var n=r(9980);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},2626:t=>{t.exports=!1},8853:(t,e,r)=>{var n=r(3637),i=r(5481),o=r(9980),s=r(3058),a=r(9027),c=n.Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return o(e)&&s(e.prototype,c(t))}},9599:(t,e,r)=>{var n=r(3637),i=r(983),o=r(2653),s=r(5572),a=r(7745),c=r(641),u=r(2210),h=r(3058),l=r(9596),v=r(9539),p=r(8359),f=n.TypeError,d=function(t,e){this.stopped=t,this.result=e},m=d.prototype;t.exports=function(t,e,r){var n,g,y,x,w,E,b,S=r&&r.that,T=!(!r||!r.AS_ENTRIES),L=!(!r||!r.IS_ITERATOR),I=!(!r||!r.INTERRUPTED),O=i(e,S),A=function(t){return n&&p(n,"normal",t),new d(!0,t)},R=function(t){return T?(s(t),I?O(t[0],t[1],A):O(t[0],t[1])):I?O(t,A):O(t)};if(L)n=t;else{if(!(g=v(t)))throw f(a(t)+" is not iterable");if(c(g)){for(y=0,x=u(t);x>y;y++)if((w=R(t[y]))&&h(m,w))return w;return new d(!1)}n=l(t,g)}for(E=n.next;!(b=o(E,n)).done;){try{w=R(b.value)}catch(t){p(n,"throw",t)}if("object"==typeof w&&w&&h(m,w))return w}return new d(!1)}},8359:(t,e,r)=>{var n=r(2653),i=r(5572),o=r(5893);t.exports=function(t,e,r){var s,a;i(t);try{if(!(s=o(t,"return"))){if("throw"===e)throw r;return r}s=n(s,t)}catch(t){a=!0,s=t}if("throw"===e)throw r;if(a)throw s;return i(s),r}},890:(t,e,r)=>{"use strict";var n,i,o,s=r(4088),a=r(9980),c=r(5624),u=r(2827),h=r(4493),l=r(2253),v=r(2626),p=l("iterator"),f=!1;[].keys&&("next"in(o=[].keys())?(i=u(u(o)))!==Object.prototype&&(n=i):f=!0),null==n||s((function(){var t={};return n[p].call(t)!==t}))?n={}:v&&(n=c(n)),a(n[p])||h(n,p,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},6160:t=>{t.exports={}},2210:(t,e,r)=>{var n=r(9322);t.exports=function(t){return n(t.length)}},4146:(t,e,r)=>{var n,i,o,s,a,c,u,h,l=r(3637),v=r(983),p=r(4216).f,f=r(5465).set,d=r(4091),m=r(5626),g=r(1629),y=r(2558),x=l.MutationObserver||l.WebKitMutationObserver,w=l.document,E=l.process,b=l.Promise,S=p(l,"queueMicrotask"),T=S&&S.value;T||(n=function(){var t,e;for(y&&(t=E.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?s():o=void 0,t}}o=void 0,t&&t.enter()},d||y||g||!x||!w?!m&&b&&b.resolve?((u=b.resolve(void 0)).constructor=b,h=v(u.then,u),s=function(){h(n)}):y?s=function(){E.nextTick(n)}:(f=v(f,l),s=function(){f(n)}):(a=!0,c=w.createTextNode(""),new x(n).observe(c,{characterData:!0}),s=function(){c.data=a=!a})),t.exports=T||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,s()),o=e}},5132:(t,e,r)=>{var n=r(3637);t.exports=n.Promise},2209:(t,e,r)=>{var n=r(1943),i=r(4088);t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},2996:(t,e,r)=>{var n=r(3637),i=r(9980),o=r(6010),s=n.WeakMap;t.exports=i(s)&&/native code/.test(o(s))},1445:(t,e,r)=>{"use strict";var n=r(8491),i=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n})),this.resolve=n(e),this.reject=n(r)};t.exports.f=function(t){return new i(t)}},5624:(t,e,r)=>{var n,i=r(5572),o=r(2107),s=r(5994),a=r(4736),c=r(2811),u=r(1896),h=r(537)("IE_PROTO"),l=function(){},v=function(t){return"<script>"+t+"<\/script>"},p=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},f=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e;f="undefined"!=typeof document?document.domain&&n?p(n):((e=u("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(v("document.F=Object")),t.close(),t.F):p(n);for(var r=s.length;r--;)delete f.prototype[s[r]];return f()};a[h]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(l.prototype=i(t),r=new l,l.prototype=null,r[h]=t):r=f(),void 0===e?r:o(r,e)}},2107:(t,e,r)=>{var n=r(4608),i=r(1276),o=r(5572),s=r(8396),a=r(5046);t.exports=n?Object.defineProperties:function(t,e){o(t);for(var r,n=s(e),c=a(e),u=c.length,h=0;u>h;)i.f(t,r=c[h++],n[r]);return t}},1276:(t,e,r)=>{var n=r(3637),i=r(4608),o=r(6962),s=r(5572),a=r(6433),c=n.TypeError,u=Object.defineProperty;e.f=i?u:function(t,e,r){if(s(t),e=a(e),s(r),o)try{return u(t,e,r)}catch(t){}if("get"in r||"set"in r)throw c("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},4216:(t,e,r)=>{var n=r(4608),i=r(2653),o=r(9392),s=r(8156),a=r(8396),c=r(6433),u=r(2270),h=r(6962),l=Object.getOwnPropertyDescriptor;e.f=n?l:function(t,e){if(t=a(t),e=c(e),h)try{return l(t,e)}catch(t){}if(u(t,e))return s(!i(o.f,t,e),t[e])}},2380:(t,e,r)=>{var n=r(6996),i=r(5994).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},1686:(t,e)=>{e.f=Object.getOwnPropertySymbols},2827:(t,e,r)=>{var n=r(3637),i=r(2270),o=r(9980),s=r(6410),a=r(537),c=r(8982),u=a("IE_PROTO"),h=n.Object,l=h.prototype;t.exports=c?h.getPrototypeOf:function(t){var e=s(t);if(i(e,u))return e[u];var r=e.constructor;return o(r)&&e instanceof r?r.prototype:e instanceof h?l:null}},3058:(t,e,r)=>{var n=r(2555);t.exports=n({}.isPrototypeOf)},6996:(t,e,r)=>{var n=r(2555),i=r(2270),o=r(8396),s=r(1891).indexOf,a=r(4736),c=n([].push);t.exports=function(t,e){var r,n=o(t),u=0,h=[];for(r in n)!i(a,r)&&i(n,r)&&c(h,r);for(;e.length>u;)i(n,r=e[u++])&&(~s(h,r)||c(h,r));return h}},5046:(t,e,r)=>{var n=r(6996),i=r(5994);t.exports=Object.keys||function(t){return n(t,i)}},9392:(t,e)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);e.f=i?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},4177:(t,e,r)=>{var n=r(2555),i=r(5572),o=r(5749);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return i(r),o(n),e?t(r,n):r.__proto__=n,r}}():void 0)},6580:(t,e,r)=>{var n=r(3637),i=r(2653),o=r(9980),s=r(2483),a=n.TypeError;t.exports=function(t,e){var r,n;if("string"===e&&o(r=t.toString)&&!s(n=i(r,t)))return n;if(o(r=t.valueOf)&&!s(n=i(r,t)))return n;if("string"!==e&&o(r=t.toString)&&!s(n=i(r,t)))return n;throw a("Can't convert object to primitive value")}},9951:(t,e,r)=>{var n=r(5481),i=r(2555),o=r(2380),s=r(1686),a=r(5572),c=i([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=o.f(a(t)),r=s.f;return r?c(e,r(t)):e}},6959:t=>{t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},8760:(t,e,r)=>{var n=r(5572),i=r(2483),o=r(1445);t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},9702:(t,e,r)=>{var n=r(4493);t.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},4493:(t,e,r)=>{var n=r(3637),i=r(9980),o=r(2270),s=r(4908),a=r(5815),c=r(6010),u=r(3362),h=r(6469).CONFIGURABLE,l=u.get,v=u.enforce,p=String(String).split("String");(t.exports=function(t,e,r,c){var u,l=!!c&&!!c.unsafe,f=!!c&&!!c.enumerable,d=!!c&&!!c.noTargetGet,m=c&&void 0!==c.name?c.name:e;i(r)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(r,"name")||h&&r.name!==m)&&s(r,"name",m),(u=v(r)).source||(u.source=p.join("string"==typeof m?m:""))),t!==n?(l?!d&&t[e]&&(f=!0):delete t[e],f?t[e]=r:s(t,e,r)):f?t[e]=r:a(e,r)})(Function.prototype,"toString",(function(){return i(this)&&l(this).source||c(this)}))},4326:(t,e,r)=>{var n=r(3637).TypeError;t.exports=function(t){if(null==t)throw n("Can't call method on "+t);return t}},4925:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},5815:(t,e,r)=>{var n=r(3637),i=Object.defineProperty;t.exports=function(t,e){try{i(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},6601:(t,e,r)=>{"use strict";var n=r(5481),i=r(1276),o=r(2253),s=r(4608),a=o("species");t.exports=function(t){var e=n(t),r=i.f;s&&e&&!e[a]&&r(e,a,{configurable:!0,get:function(){return this}})}},8939:(t,e,r)=>{var n=r(1276).f,i=r(2270),o=r(2253)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},537:(t,e,r)=>{var n=r(1347),i=r(8099),o=n("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},6799:(t,e,r)=>{var n=r(3637),i=r(5815),o="__core-js_shared__",s=n[o]||i(o,{});t.exports=s},1347:(t,e,r)=>{var n=r(2626),i=r(6799);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.19.1",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},8434:(t,e,r)=>{var n=r(5572),i=r(7506),o=r(2253)("species");t.exports=function(t,e){var r,s=n(t).constructor;return void 0===s||null==(r=n(s)[o])?e:i(r)}},5465:(t,e,r)=>{var n,i,o,s,a=r(3637),c=r(6307),u=r(983),h=r(9980),l=r(2270),v=r(4088),p=r(2811),f=r(9344),d=r(1896),m=r(4091),g=r(2558),y=a.setImmediate,x=a.clearImmediate,w=a.process,E=a.Dispatch,b=a.Function,S=a.MessageChannel,T=a.String,L=0,I={};try{n=a.location}catch(t){}var O=function(t){if(l(I,t)){var e=I[t];delete I[t],e()}},A=function(t){return function(){O(t)}},R=function(t){O(t.data)},_=function(t){a.postMessage(T(t),n.protocol+"//"+n.host)};y&&x||(y=function(t){var e=f(arguments,1);return I[++L]=function(){c(h(t)?t:b(t),void 0,e)},i(L),L},x=function(t){delete I[t]},g?i=function(t){w.nextTick(A(t))}:E&&E.now?i=function(t){E.now(A(t))}:S&&!m?(s=(o=new S).port2,o.port1.onmessage=R,i=u(s.postMessage,s)):a.addEventListener&&h(a.postMessage)&&!a.importScripts&&n&&"file:"!==n.protocol&&!v(_)?(i=_,a.addEventListener("message",R,!1)):i="onreadystatechange"in d("script")?function(t){p.appendChild(d("script")).onreadystatechange=function(){p.removeChild(this),O(t)}}:function(t){setTimeout(A(t),0)}),t.exports={set:y,clear:x}},7179:(t,e,r)=>{var n=r(742),i=Math.max,o=Math.min;t.exports=function(t,e){var r=n(t);return r<0?i(r+e,0):o(r,e)}},8396:(t,e,r)=>{var n=r(6767),i=r(4326);t.exports=function(t){return n(i(t))}},742:t=>{var e=Math.ceil,r=Math.floor;t.exports=function(t){var n=+t;return n!=n||0===n?0:(n>0?r:e)(n)}},9322:(t,e,r)=>{var n=r(742),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},6410:(t,e,r)=>{var n=r(3637),i=r(4326),o=n.Object;t.exports=function(t){return o(i(t))}},8016:(t,e,r)=>{var n=r(3637),i=r(2653),o=r(2483),s=r(8853),a=r(5893),c=r(6580),u=r(2253),h=n.TypeError,l=u("toPrimitive");t.exports=function(t,e){if(!o(t)||s(t))return t;var r,n=a(t,l);if(n){if(void 0===e&&(e="default"),r=i(n,t,e),!o(r)||s(r))return r;throw h("Can't convert object to primitive value")}return void 0===e&&(e="number"),c(t,e)}},6433:(t,e,r)=>{var n=r(8016),i=r(8853);t.exports=function(t){var e=n(t,"string");return i(e)?e:e+""}},7325:(t,e,r)=>{var n={};n[r(2253)("toStringTag")]="z",t.exports="[object z]"===String(n)},7745:(t,e,r)=>{var n=r(3637).String;t.exports=function(t){try{return n(t)}catch(t){return"Object"}}},8099:(t,e,r)=>{var n=r(2555),i=0,o=Math.random(),s=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++i+o,36)}},9027:(t,e,r)=>{var n=r(2209);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},2253:(t,e,r)=>{var n=r(3637),i=r(1347),o=r(2270),s=r(8099),a=r(2209),c=r(9027),u=i("wks"),h=n.Symbol,l=h&&h.for,v=c?h:h&&h.withoutSetter||s;t.exports=function(t){if(!o(u,t)||!a&&"string"!=typeof u[t]){var e="Symbol."+t;a&&o(h,t)?u[t]=h[t]:u[t]=c&&l?l(e):v(e)}return u[t]}},6146:(t,e,r)=>{"use strict";var n=r(8396),i=r(2804),o=r(6160),s=r(3362),a=r(1815),c="Array Iterator",u=s.set,h=s.getterFor(c);t.exports=a(Array,"Array",(function(t,e){u(this,{type:c,target:n(t),index:0,kind:e})}),(function(){var t=h(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},5791:(t,e,r)=>{"use strict";var n,i,o,s,a=r(8224),c=r(2626),u=r(3637),h=r(5481),l=r(2653),v=r(5132),p=r(4493),f=r(9702),d=r(4177),m=r(8939),g=r(6601),y=r(8491),x=r(9980),w=r(2483),E=r(2355),b=r(6010),S=r(9599),T=r(5698),L=r(8434),I=r(5465).set,O=r(4146),A=r(8760),R=r(4187),_=r(1445),j=r(6959),P=r(3362),M=r(501),F=r(2253),C=r(9255),N=r(2558),W=r(1943),k=F("species"),z="Promise",H=P.get,D=P.set,G=P.getterFor(z),U=v&&v.prototype,q=v,B=U,Y=u.TypeError,X=u.document,$=u.process,V=_.f,K=V,J=!!(X&&X.createEvent&&u.dispatchEvent),Q=x(u.PromiseRejectionEvent),Z="unhandledrejection",tt=!1,et=M(z,(function(){var t=b(q),e=t!==String(q);if(!e&&66===W)return!0;if(c&&!B.finally)return!0;if(W>=51&&/native code/.test(t))return!1;var r=new q((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};return(r.constructor={})[k]=n,!(tt=r.then((function(){}))instanceof n)||!e&&C&&!Q})),rt=et||!T((function(t){q.all(t).catch((function(){}))})),nt=function(t){var e;return!(!w(t)||!x(e=t.then))&&e},it=function(t,e){if(!t.notified){t.notified=!0;var r=t.reactions;O((function(){for(var n=t.value,i=1==t.state,o=0;r.length>o;){var s,a,c,u=r[o++],h=i?u.ok:u.fail,v=u.resolve,p=u.reject,f=u.domain;try{h?(i||(2===t.rejection&&ct(t),t.rejection=1),!0===h?s=n:(f&&f.enter(),s=h(n),f&&(f.exit(),c=!0)),s===u.promise?p(Y("Promise-chain cycle")):(a=nt(s))?l(a,s,v,p):v(s)):p(n)}catch(t){f&&!c&&f.exit(),p(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&st(t)}))}},ot=function(t,e,r){var n,i;J?((n=X.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),u.dispatchEvent(n)):n={promise:e,reason:r},!Q&&(i=u["on"+t])?i(n):t===Z&&R("Unhandled promise rejection",r)},st=function(t){l(I,u,(function(){var e,r=t.facade,n=t.value;if(at(t)&&(e=j((function(){N?$.emit("unhandledRejection",n,r):ot(Z,r,n)})),t.rejection=N||at(t)?2:1,e.error))throw e.value}))},at=function(t){return 1!==t.rejection&&!t.parent},ct=function(t){l(I,u,(function(){var e=t.facade;N?$.emit("rejectionHandled",e):ot("rejectionhandled",e,t.value)}))},ut=function(t,e,r){return function(n){t(e,n,r)}},ht=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,it(t,!0))},lt=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw Y("Promise can't be resolved itself");var n=nt(e);n?O((function(){var r={done:!1};try{l(n,e,ut(lt,r,t),ut(ht,r,t))}catch(e){ht(r,e,t)}})):(t.value=e,t.state=1,it(t,!1))}catch(e){ht({done:!1},e,t)}}};if(et&&(B=(q=function(t){E(this,B),y(t),l(n,this);var e=H(this);try{t(ut(lt,e),ut(ht,e))}catch(t){ht(e,t)}}).prototype,(n=function(t){D(this,{type:z,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=f(B,{then:function(t,e){var r=G(this),n=r.reactions,i=V(L(this,q));return i.ok=!x(t)||t,i.fail=x(e)&&e,i.domain=N?$.domain:void 0,r.parent=!0,n[n.length]=i,0!=r.state&&it(r,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new n,e=H(t);this.promise=t,this.resolve=ut(lt,e),this.reject=ut(ht,e)},_.f=V=function(t){return t===q||t===o?new i(t):K(t)},!c&&x(v)&&U!==Object.prototype)){s=U.then,tt||(p(U,"then",(function(t,e){var r=this;return new q((function(t,e){l(s,r,t,e)})).then(t,e)}),{unsafe:!0}),p(U,"catch",B.catch,{unsafe:!0}));try{delete U.constructor}catch(t){}d&&d(U,B)}a({global:!0,wrap:!0,forced:et},{Promise:q}),m(q,z,!1,!0),g(z),o=h(z),a({target:z,stat:!0,forced:et},{reject:function(t){var e=V(this);return l(e.reject,void 0,t),e.promise}}),a({target:z,stat:!0,forced:c||et},{resolve:function(t){return A(c&&this===o?q:this,t)}}),a({target:z,stat:!0,forced:rt},{all:function(t){var e=this,r=V(e),n=r.resolve,i=r.reject,o=j((function(){var r=y(e.resolve),o=[],s=0,a=1;S(t,(function(t){var c=s++,u=!1;a++,l(r,e,t).then((function(t){u||(u=!0,o[c]=t,--a||n(o))}),i)})),--a||n(o)}));return o.error&&i(o.value),r.promise},race:function(t){var e=this,r=V(e),n=r.reject,i=j((function(){var i=y(e.resolve);S(t,(function(t){l(i,e,t).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}})},7347:(t,e,r)=>{"use strict";r(8224)({target:"Map",proto:!0,real:!0,forced:r(2626)},{deleteAll:r(3650)})},8305:(t,e,r)=>{"use strict";var n=r(8224),i=r(2626),o=r(5572),s=r(983),a=r(5215),c=r(9599);n({target:"Map",proto:!0,real:!0,forced:i},{every:function(t){var e=o(this),r=a(e),n=s(t,arguments.length>1?arguments[1]:void 0);return!c(r,(function(t,r,i){if(!n(r,t,e))return i()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},3457:(t,e,r)=>{"use strict";var n=r(2626),i=r(8224),o=r(5481),s=r(983),a=r(2653),c=r(8491),u=r(5572),h=r(8434),l=r(5215),v=r(9599);i({target:"Map",proto:!0,real:!0,forced:n},{filter:function(t){var e=u(this),r=l(e),n=s(t,arguments.length>1?arguments[1]:void 0),i=new(h(e,o("Map"))),p=c(i.set);return v(r,(function(t,r){n(r,t,e)&&a(p,i,t,r)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}})},6660:(t,e,r)=>{"use strict";var n=r(8224),i=r(2626),o=r(5572),s=r(983),a=r(5215),c=r(9599);n({target:"Map",proto:!0,real:!0,forced:i},{findKey:function(t){var e=o(this),r=a(e),n=s(t,arguments.length>1?arguments[1]:void 0);return c(r,(function(t,r,i){if(n(r,t,e))return i(t)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},4636:(t,e,r)=>{"use strict";var n=r(8224),i=r(2626),o=r(5572),s=r(983),a=r(5215),c=r(9599);n({target:"Map",proto:!0,real:!0,forced:i},{find:function(t){var e=o(this),r=a(e),n=s(t,arguments.length>1?arguments[1]:void 0);return c(r,(function(t,r,i){if(n(r,t,e))return i(r)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},8401:(t,e,r)=>{"use strict";var n=r(2626),i=r(8224),o=r(5572),s=r(5215),a=r(4925),c=r(9599);i({target:"Map",proto:!0,real:!0,forced:n},{includes:function(t){return c(s(o(this)),(function(e,r,n){if(a(r,t))return n()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},4965:(t,e,r)=>{"use strict";var n=r(8224),i=r(2626),o=r(5572),s=r(5215),a=r(9599);n({target:"Map",proto:!0,real:!0,forced:i},{keyOf:function(t){return a(s(o(this)),(function(e,r,n){if(r===t)return n(e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},4120:(t,e,r)=>{"use strict";var n=r(2626),i=r(8224),o=r(5481),s=r(983),a=r(2653),c=r(8491),u=r(5572),h=r(8434),l=r(5215),v=r(9599);i({target:"Map",proto:!0,real:!0,forced:n},{mapKeys:function(t){var e=u(this),r=l(e),n=s(t,arguments.length>1?arguments[1]:void 0),i=new(h(e,o("Map"))),p=c(i.set);return v(r,(function(t,r){a(p,i,n(r,t,e),r)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}})},4492:(t,e,r)=>{"use strict";var n=r(2626),i=r(8224),o=r(5481),s=r(983),a=r(2653),c=r(8491),u=r(5572),h=r(8434),l=r(5215),v=r(9599);i({target:"Map",proto:!0,real:!0,forced:n},{mapValues:function(t){var e=u(this),r=l(e),n=s(t,arguments.length>1?arguments[1]:void 0),i=new(h(e,o("Map"))),p=c(i.set);return v(r,(function(t,r){a(p,i,t,n(r,t,e))}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}})},842:(t,e,r)=>{"use strict";var n=r(8224),i=r(2626),o=r(8491),s=r(5572),a=r(9599);n({target:"Map",proto:!0,real:!0,forced:i},{merge:function(t){for(var e=s(this),r=o(e.set),n=arguments.length,i=0;i<n;)a(arguments[i++],r,{that:e,AS_ENTRIES:!0});return e}})},5442:(t,e,r)=>{"use strict";var n=r(8224),i=r(3637),o=r(2626),s=r(5572),a=r(8491),c=r(5215),u=r(9599),h=i.TypeError;n({target:"Map",proto:!0,real:!0,forced:o},{reduce:function(t){var e=s(this),r=c(e),n=arguments.length<2,i=n?void 0:arguments[1];if(a(t),u(r,(function(r,o){n?(n=!1,i=o):i=t(i,o,r,e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),n)throw h("Reduce of empty map with no initial value");return i}})},593:(t,e,r)=>{"use strict";var n=r(8224),i=r(2626),o=r(5572),s=r(983),a=r(5215),c=r(9599);n({target:"Map",proto:!0,real:!0,forced:i},{some:function(t){var e=o(this),r=a(e),n=s(t,arguments.length>1?arguments[1]:void 0);return c(r,(function(t,r,i){if(n(r,t,e))return i()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},5805:(t,e,r)=>{"use strict";var n=r(2626),i=r(8224),o=r(3637),s=r(2653),a=r(5572),c=r(8491),u=o.TypeError;i({target:"Map",proto:!0,real:!0,forced:n},{update:function(t,e){var r=a(this),n=c(r.get),i=c(r.has),o=c(r.set),h=arguments.length;c(e);var l=s(i,r,t);if(!l&&h<3)throw u("Updating absent value");var v=l?s(n,r,t):c(h>2?arguments[2]:void 0)(t,r);return s(o,r,t,e(v,t,r)),r}})},3962:(t,e,r)=>{var n=r(3637),i=r(9363),o=r(2371),s=r(6146),a=r(4908),c=r(2253),u=c("iterator"),h=c("toStringTag"),l=s.values,v=function(t,e){if(t){if(t[u]!==l)try{a(t,u,l)}catch(e){t[u]=l}if(t[h]||a(t,h,e),i[e])for(var r in s)if(t[r]!==s[r])try{a(t,r,s[r])}catch(e){t[r]=s[r]}}};for(var p in i)v(n[p]&&n[p].prototype,p);v(o,"DOMTokenList")}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{default:()=>e}),r(5791),r(3962),r(7347),r(8305),r(3457),r(4636),r(6660),r(8401),r(4965),r(4120),r(4492),r(842),r(5442),r(593),r(5805);const t=function(t,e,r,n,i,o,s,a){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=[],u._compiled=!0),c)if(u.functional){u._injectStyles=c;var h=u.render;u.render=function(t,e){return c.call(e),h(t,e)}}else{var l=u.beforeCreate;u.beforeCreate=l?[].concat(l,c):[c]}return{exports:t,options:u}}({name:"me-image-crop",props:{imageSrc:{type:String,required:!0},showBtn:{type:Boolean,default:!0},outType:{type:String,default:"base64"}},data:()=>({browser:"",wt:null,canvas:null,ctx:null,canvasWidth:0,canvasHeight:0,cropFrameSize:0,buttonTop:0,buttonRight:0,buttonSize:30,waitingAni:{size:5,colors:["#e2e2e2","#a2a2a2","#a2a2a2"],timer:0,start:!1},img:null,imgNaturalWidth:0,imgNaturalHeight:0,scale:1,scaleRate:0,position:{x:0,y:0},rotateAngle:0,AnimationFrameId:""}),created(){this.wt=this.watchTouch(),this.wt.watch();try{window.addEventListener("touchmove",this.forbidPageScale,{passive:!1})}catch(t){window.addEventListener("touchmove",this.forbidPageScale)}if(this.is_pc()){let t="",e=window.navigator.userAgent.toLowerCase();e.indexOf("trident/7.0")>-1?t="ie":e.indexOf("opera")>-1?t="opera":e.indexOf("safari")>-1&&-1===e.indexOf("chrome")?t="safari":e.indexOf("chrome")>-1?t="chrome":e.indexOf("firefox")>-1&&(t="firefox"),this.browser=t}this.$nextTick((()=>{Promise.all([this.initCanvas(),this.imgLoad()]).then((()=>{this.scaleImg(),this.translateImg(),this.rotateImg()})),this.AnimationFrameId=window.requestAnimationFrame(this.draw)}))},watch:{showBtn(t,e){t&&this.$nextTick(this.rotateImg_pc)}},methods:{forbidPageScale(t){(t=t||window.event).preventDefault()},is_pc(){let t=["android","iphone","symbianOS","windows phone","ipad","ipod"],e=window.navigator.userAgent.toLowerCase(),r=!0;for(let n=0;n<t.length;n++)e.indexOf(t[n])>=0&&(r=!1);return r},watchTouch(){let t=new Map;const e=e=>{t.set(e.changedTouches[0].identifier,e.changedTouches[0])},r=e=>{Array.from(e.touches).map((e=>{t.has(e.identifier)&&t.set(e.identifier,e)}))},n=e=>{t.delete(e.changedTouches[0].identifier)},i=e=>{t.clear()};return{watch(){window.addEventListener("touchstart",e,!0),window.addEventListener("touchmove",r,!0),window.addEventListener("touchend",n,!0),window.addEventListener("touchcancel",i,!0)},dispose(){window.removeEventListener("touchstart",e),window.removeEventListener("touchmove",r),window.removeEventListener("touchend",n),window.removeEventListener("touchcancel",i)},touchMap:t}},initCanvas(){let t=window.getComputedStyle(this.$refs.meImageCrop,null).getPropertyValue("height"),e=window.getComputedStyle(this.$refs.meImageCrop,null).getPropertyValue("width");return this.canvasHeight=parseInt(t),this.canvasWidth=parseInt(e),this.canvas=this.$refs.meImageCrop.querySelector(".me-image-crop-canvas"),this.canvas.height=this.canvasHeight,this.canvas.width=this.canvasWidth,this.ctx=this.canvas.getContext("2d"),this.cropFrameSize=this.canvasWidth<this.canvasHeight?.7*this.canvasWidth:.7*this.canvasHeight,this.buttonTop=this.canvasHeight/30>30?30:this.canvasHeight/30<20?20:this.canvasHeight/30,this.buttonRight=((this.canvasWidth-this.cropFrameSize)/2-this.buttonSize)/2,this.buttonRight=this.buttonRight>30?30:this.buttonRight<10?10:this.buttonRight,this.position.x=this.canvasWidth/2,this.position.y=this.canvasHeight/2,Promise.resolve()},imgLoad(){return new Promise(((t,e)=>{this.img=document.createElement("img"),this.img.src=this.imageSrc,this.img.onload=()=>{this.imgNaturalWidth=this.img.naturalWidth,this.imgNaturalHeight=this.img.naturalHeight;let e=this.canvasWidth/this.imgNaturalWidth,r=this.canvasHeight/this.imgNaturalHeight;this.scale=e<r?e:r,t()}}))},drawCropFrame(){let t=[{x:0,y:0},{x:this.canvasWidth,y:0},{x:this.canvasWidth,y:this.canvasHeight},{x:0,y:this.canvasHeight}],e=[{x:parseInt(this.canvasWidth/2-this.cropFrameSize/2)+.5,y:parseInt(this.canvasHeight/2-this.cropFrameSize/2)+.5},{x:parseInt(this.canvasWidth/2+this.cropFrameSize/2)+.5,y:parseInt(this.canvasHeight/2-this.cropFrameSize/2)+.5},{x:parseInt(this.canvasWidth/2+this.cropFrameSize/2)+.5,y:parseInt(this.canvasHeight/2+this.cropFrameSize/2)+.5},{x:parseInt(this.canvasWidth/2-this.cropFrameSize/2)+.5,y:parseInt(this.canvasHeight/2+this.cropFrameSize/2)+.5}];this.ctx.save(),this.ctx.fillStyle="rgba(0,0,0,0.35)",this.ctx.beginPath(),this.ctx.moveTo(t[0].x,t[0].y),this.ctx.lineTo(e[0].x,e[0].y),this.ctx.lineTo(e[1].x,e[1].y),this.ctx.lineTo(e[2].x,e[2].y),this.ctx.lineTo(e[3].x,e[3].y),this.ctx.lineTo(e[0].x,e[0].y),this.ctx.lineTo(t[0].x,t[0].y),this.ctx.lineTo(t[3].x,t[3].y),this.ctx.lineTo(t[2].x,t[2].y),this.ctx.lineTo(t[1].x,t[1].y),this.ctx.fill(),this.ctx.restore(),this.ctx.save(),this.ctx.strokeStyle="#fff",this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(e[0].x,e[0].y),this.ctx.lineTo(e[1].x,e[1].y),this.ctx.lineTo(e[2].x,e[2].y),this.ctx.lineTo(e[3].x,e[3].y),this.ctx.closePath(),this.ctx.stroke(),this.ctx.restore()},scaleImg(){let t,e,r,n,i=!1;const o=o=>{if(!i)if(o=o||window.event,this.is_pc())i=!0;else{let o=[];if([...this.wt.touchMap.values()].map((t=>{t.target===this.$refs.meImageCrop.querySelector(".me-image-crop-canvas")&&o.push(t)})),2===o.length&&!1===i){i=!0,n=this.scale,e=o[0].identifier,r=o[1].identifier;let s=o[0].clientX,a=o[0].clientY,c=o[1].clientX,u=o[1].clientY;t=Math.sqrt((s-c)*(s-c)+(a-u)*(a-u))}}},s=o=>{if(this.is_pc()){let t=document.querySelector(".me-image-crop-canvas");!t||!t.contains(o.target)&&t!==o.target||this.scaleStart||(i=!0)}if(i)if(o=o||window.event,this.is_pc()){let t="";t="firefox"===this.browser?o.detail<0?"up":"down":o.wheelDelta>0?"up":"down",this.scale="up"===t?1.1*this.scale:.9*this.scale}else{let i,s;for(let t=0;t<o.touches.length;t++)o.touches[t].identifier===e&&(i=o.touches[t]),o.touches[t].identifier===r&&(s=o.touches[t]);if(!i||!s)return;let a=i.clientX,c=i.clientY,u=s.clientX,h=s.clientY,l=Math.sqrt((a-u)*(a-u)+(c-h)*(c-h));this.scale=n*(l/t)}},a=o=>{if(i)if(o=o||window.event,this.is_pc())i=!1,t=void 0,e=void 0,r=void 0,n=void 0;else{let s,a;for(let t=0;t<o.touches.length;t++)o.touches[t].identifier===e&&(s=o.touches[t]),o.touches[t].identifier===r&&(a=o.touches[t]);"touchcancel"!==o.type&&s&&a||(i=!1,t=void 0,e=void 0,r=void 0,n=void 0)}};this.canvas.addEventListener("mouseover",o),window.addEventListener("DOMMouseScroll",s),window.addEventListener("mousewheel",s),this.canvas.addEventListener("mouseout",a),this.canvas.addEventListener("touchmove",o),this.canvas.addEventListener("touchmove",s),document.addEventListener("touchend",a),document.addEventListener("touchcancel",a),this._disposeScale=()=>{this.canvas.removeEventListener("mouseenter",o),window.removeEventListener("DOMMouseScroll",s),window.removeEventListener("mousewheel",s),this.canvas.removeEventListener("mouseleave",a),this.canvas.removeEventListener("touchmove",o),this.canvas.removeEventListener("touchmove",s),document.removeEventListener("touchend",a),document.removeEventListener("touchcancel",a)}},translateImg(){let t,e=!1,r={x:0,y:0},n={x:0,y:0};const i=i=>{if(!e)if(i=i||window.event,this.is_pc())e=!0,n.x=this.position.x,n.y=this.position.y,r.x=i.clientX,r.y=i.clientY;else{let i=[],o=[...this.wt.touchMap.values()];o.map((t=>{t.target===this.$refs.meImageCrop.querySelector(".me-image-crop-canvas")&&i.push(t)})),1===i.length&&1===o.length&&!1===e&&(e=!0,n.x=this.position.x,n.y=this.position.y,t=i[0].identifier,r.x=i[0].clientX,r.y=i[0].clientY)}},o=i=>{if(e)if(i=i||window.event,this.is_pc()){let t=i.clientX-r.x,e=i.clientY-r.y;this.position.x=n.x+t,this.position.y=n.y+e}else{let e;for(let r=0;r<i.touches.length;r++)i.touches[r].identifier===t&&(e=i.touches[r]);if(!e)return;let o=e.clientX-r.x,s=e.clientY-r.y;this.position.x=n.x+o,this.position.y=n.y+s}},s=i=>{e&&(e=!1,n.x=0,n.y=0,r.x=0,r.y=0,t=void 0)};this.canvas.addEventListener("mousemove",o),this.canvas.addEventListener("mousedown",i),document.addEventListener("mouseup",s),document.addEventListener("mousecancel",s),this.canvas.addEventListener("touchmove",i),this.canvas.addEventListener("touchmove",o),document.addEventListener("touchend",s),document.addEventListener("touchcancel",s),document.addEventListener("touchstart",s),this._disposeTranslate=()=>{this.canvas.removeEventListener("mousemove",o),this.canvas.removeEventListener("click",i),document.removeEventListener("mouseup",s),document.removeEventListener("mousecancel",s),this.canvas.removeEventListener("touchmove",i),this.canvas.removeEventListener("touchmove",o),document.removeEventListener("touchend",s),document.removeEventListener("touchcancel",s),document.removeEventListener("touchstart",s)}},rotateImg(){this.is_pc()&&this.showBtn?this.rotateImg_pc():this.rotateImg_mobile()},rotateImg_pc(){let t=this.$refs.meImageCrop.querySelector(".me-image-crop-btn-rotate");if(!t)return;let e=!0,r=!0;t.addEventListener("click",(()=>{r?this.rotateAngle++:this.rotateAngle--}));let n=function(t){if(!(t instanceof HTMLElement||t===window))return;let e,r,n={},i=0;function o(t){i=1,window.removeEventListener("click",o),window.removeEventListener("mouseup",o),window.removeEventListener("mousecancel",o),e&&clearTimeout(e)}function s(t){window.removeEventListener("click",s),window.removeEventListener("mouseup",s),window.removeEventListener("mousecancel",s),r&&clearInterval(r),n.longtabover&&n.longtabover.map((t=>{t()}))}return t.addEventListener("mousedown",(()=>{i=0,window.addEventListener("click",o),window.addEventListener("mouseup",o),window.addEventListener("mousecancel",o),e=setTimeout((()=>{window.removeEventListener("click",o),window.removeEventListener("mouseup",o),window.removeEventListener("mousecancel",o),0===i&&(i=2,n.longtabstart&&n.longtabstart.map((t=>{t()})),r=setInterval((()=>{n.longtabing&&n.longtabing.map((t=>{t()}))}),50),window.addEventListener("click",s),window.addEventListener("mouseup",s),window.addEventListener("mousecancel",s))}),500)})),{addEventListener:function(t,e){n[t]?n[t].push(e):n[t]=[e]}}}(t);n.addEventListener("longtabstart",(()=>{e?e=!1:r=!r})),n.addEventListener("longtabing",(()=>{this.rotateAngle+=r?3:-3}))},rotateImg_mobile(){let t,e,r=!1,n=null,i={x:null,y:null};const o=o=>{if(r)return;o=o||window.event;let s=[];[...this.wt.touchMap.values()].map((t=>{t.target===this.$refs.meImageCrop.querySelector(".me-image-crop-canvas")&&s.push(t)})),2===s.length&&!1===r&&(r=!0,n=this.rotateAngle,t=s[0].identifier,e=s[1].identifier,i.x=s[1].clientX-s[0].clientX,i.y=s[1].clientY-s[0].clientY)},s=o=>{if(!r)return;let s,a;o=o||window.event;for(let r=0;r<o.touches.length;r++)o.touches[r].identifier===t&&(s=o.touches[r]),o.touches[r].identifier===e&&(a=o.touches[r]);if(!s||!a)return;let c={x:null,y:null};c.x=a.clientX-s.clientX,c.y=a.clientY-s.clientY;let u=Math.acos((i.x*c.x+i.y*c.y)/(Math.sqrt(i.x*i.x+i.y*i.y)*Math.sqrt(c.x*c.x+c.y*c.y)));if(u=180/Math.PI*u,Number.isNaN(u))return;let h=i.x*c.y-i.y*c.x;this.rotateAngle=h>=0?n+u:n-u},a=o=>{if(!r)return;let s,a;o=o||window.event;for(let r=0;r<o.touches.length;r++)o.touches[r].identifier===t&&(s=o.touches[r]),o.touches[r].identifier===e&&(a=o.touches[r]);"touchcancel"!==o.type&&s&&a||(r=!1,i.x=null,i.y=null,t=null,e=null,n=null)};this.canvas.addEventListener("touchstart",o),this.canvas.addEventListener("touchmove",s),document.addEventListener("touchend",a),document.addEventListener("touchcancel",a),this._disposeRotate=()=>{this.canvas.removeEventListener("touchstart",o),this.canvas.removeEventListener("touchmove",s),document.removeEventListener("touchend",a),document.removeEventListener("touchcancel",a)}},cancelCrop(){this.$emit("cancel-crop-image")},confirmCrop(){if(this.waitingAni.start)return;this.startWaitingAni();let t={x:parseInt(this.canvasWidth/2-(this.cropFrameSize-2)/2)+.5,y:parseInt(this.canvasHeight/2-(this.cropFrameSize-2)/2)+.5},e=this.ctx.getImageData(t.x,t.y,this.cropFrameSize-2,this.cropFrameSize-2),r=document.createElement("canvas");r.width=this.cropFrameSize,r.height=this.cropFrameSize,r.getContext("2d").putImageData(e,0,0),"base64"===this.outType?(this.closeWaitingAni(),this.$emit("confirm-crop-image",r.toDataURL())):r.toBlob((t=>{this.closeWaitingAni(),this.$emit("confirm-crop-image",t)}),"image/jpg",1)},getImage(t){let e={x:parseInt(this.canvasWidth/2-(this.cropFrameSize-2)/2)+.5,y:parseInt(this.canvasHeight/2-(this.cropFrameSize-2)/2)+.5},r=this.ctx.getImageData(e.x,e.y,this.cropFrameSize-2,this.cropFrameSize-2),n=document.createElement("canvas");if(n.width=this.cropFrameSize,n.height=this.cropFrameSize,n.getContext("2d").putImageData(r,0,0),"base64"===this.outType)return this.closeWaitingAni(),n.toDataURL();this.closeWaitingAni(),n.toBlob(t,"image/jpg",1)},startWaitingAni(){this.waitingAni.start=!0,this.waitingAni.timer=setInterval((()=>{let t=this.waitingAni.colors[2];this.waitingAni.colors.splice(2,1),this.waitingAni.colors.unshift(t)}),250)},closeWaitingAni(){this.waitingAni.start=!1,clearInterval(this.waitingAni.timer)},draw(){if(!this.canvas||!this.img)return;this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.ctx.save(),this.position.x,this.imgNaturalWidth,this.scale,this.position.y,this.imgNaturalHeight,this.scale;let t=this.imgNaturalWidth*this.scale,e=this.imgNaturalHeight*this.scale;if(this.ctx.translate(this.position.x,this.position.y),this.ctx.rotate(this.rotateAngle*(Math.PI/180)),this.ctx.drawImage(this.img,-t/2,-e/2,t,e),this.ctx.restore(),this.drawCropFrame(),this.waitingAni.start)for(let t=0;t<this.waitingAni.colors.length;t++){let e,r;this.ctx.save(),this.ctx.fillStyle=this.waitingAni.colors[t],this.ctx.beginPath(),0===t?(e=this.canvasWidth/2-15,r=this.canvasHeight/2):1===t?(e=this.canvasWidth/2,r=this.canvasHeight/2):(e=this.canvasWidth/2+15,r=this.canvasHeight/2),this.ctx.arc(e,r,this.waitingAni.size,0,2*Math.PI,!0),this.ctx.fill(),this.ctx.restore()}this.AnimationFrameId=window.requestAnimationFrame(this.draw)}},mounted(){},beforeDestroy(){this.wt.dispose(),window.removeEventListener("touchmove",this.forbidPageScale),window.cancelAnimationFrame(this.AnimationFrameId),this._disposeScale(),this._disposeTranslate(),!this.is_pc()&&this._disposeRotate(),this.closeWaitingAni()}},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"meImageCrop",staticClass:"me-image-crop"},[r("canvas",{staticClass:"me-image-crop-canvas"}),t._v(" "),r("div",{staticClass:"me-image-crop-btns",style:{top:t.buttonTop+"px",right:t.buttonRight+"px"}},[t.showBtn&&t.is_pc()?r("div",{staticClass:"me-image-crop-btn me-image-crop-btn-rotate"},[t._t("rotate",(function(){return[r("span",{staticClass:"me-icon me-icon-rotate2",style:{fontSize:t.buttonSize+"px",color:"#DAA520"},attrs:{alt:""}})]}))],2):t._e(),t._v(" "),t.showBtn?r("div",{staticClass:"me-image-crop-btn",on:{click:t.cancelCrop}},[t._t("cancel",(function(){return[r("span",{staticClass:"me-icon me-icon-cancel",style:{fontSize:t.buttonSize+"px",color:"#E56149"},attrs:{alt:""}})]}))],2):t._e(),t._v(" "),t.showBtn?r("div",{staticClass:"me-image-crop-btn",on:{click:t.confirmCrop}},[t._t("confirm",(function(){return[r("span",{staticClass:"me-icon me-icon-sure",style:{fontSize:t.buttonSize+"px",color:"#45C189"},attrs:{alt:""}})]}))],2):t._e()])])})).exports;t.install=function(e){e.component(t.name,t)};const e=t})(),module.exports=n})();