(()=>{var t={3099:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},6077:(t,e,n)=>{var r=n(111);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},1223:(t,e,n)=>{var r=n(5112),i=n(30),o=n(3070),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(t){s[a][t]=!0}},5787:t=>{t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},9670:(t,e,n)=>{var r=n(111);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},1318:(t,e,n)=>{var r=n(5656),i=n(7466),o=n(1400),a=function(t){return function(e,n,a){var s,c=r(e),u=i(c.length),l=o(a,u);if(t&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},7072:(t,e,n)=>{var r=n(5112)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},4326:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},648:(t,e,n)=>{var r=n(1694),i=n(4326),o=n(5112)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},4092:(t,e,n)=>{"use strict";var r=n(9670),i=n(3099);t.exports=function(){for(var t,e=r(this),n=i(e.delete),o=!0,a=0,s=arguments.length;a<s;a++)t=n.call(e,arguments[a]),o=o&&t;return!!o}},9920:(t,e,n)=>{var r=n(6656),i=n(3887),o=n(1236),a=n(3070);t.exports=function(t,e){for(var n=i(e),s=a.f,c=o.f,u=0;u<n.length;u++){var l=n[u];r(t,l)||s(t,l,c(e,l))}}},8544:(t,e,n)=>{var r=n(7293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},4994:(t,e,n)=>{"use strict";var r=n(3383).IteratorPrototype,i=n(30),o=n(9114),a=n(8003),s=n(7497),c=function(){return this};t.exports=function(t,e,n){var u=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,u,!1,!0),s[u]=c,t}},8880:(t,e,n)=>{var r=n(9781),i=n(3070),o=n(9114);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9114:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},654:(t,e,n)=>{"use strict";var r=n(2109),i=n(4994),o=n(9518),a=n(7674),s=n(8003),c=n(8880),u=n(1320),l=n(5112),h=n(1913),f=n(7497),p=n(3383),v=p.IteratorPrototype,d=p.BUGGY_SAFARI_ITERATORS,m=l("iterator"),g="keys",y="values",x="entries",w=function(){return this};t.exports=function(t,e,n,l,p,E,S){i(n,e,l);var b,T,L,I=function(t){if(t===p&&j)return j;if(!d&&t in _)return _[t];switch(t){case g:case y:case x:return function(){return new n(this,t)}}return function(){return new n(this)}},A=e+" Iterator",O=!1,_=t.prototype,R=_[m]||_["@@iterator"]||p&&_[p],j=!d&&R||I(p),P="Array"==e&&_.entries||R;if(P&&(b=o(P.call(new t)),v!==Object.prototype&&b.next&&(h||o(b)===v||(a?a(b,v):"function"!=typeof b[m]&&c(b,m,w)),s(b,A,!0,!0),h&&(f[A]=w))),p==y&&R&&R.name!==y&&(O=!0,j=function(){return R.call(this)}),h&&!S||_[m]===j||c(_,m,j),f[e]=j,p)if(T={values:I(y),keys:E?j:I(g),entries:I(x)},S)for(L in T)(d||O||!(L in _))&&u(_,L,T[L]);else r({target:e,proto:!0,forced:d||O},T);return T}},9781:(t,e,n)=>{var r=n(7293);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:(t,e,n)=>{var r=n(7854),i=n(111),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},8324:t=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},7871:t=>{t.exports="object"==typeof window},6833:(t,e,n)=>{var r=n(8113);t.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(r)},5268:(t,e,n)=>{var r=n(4326),i=n(7854);t.exports="process"==r(i.process)},1036:(t,e,n)=>{var r=n(8113);t.exports=/web0s(?!.*chrome)/i.test(r)},8113:(t,e,n)=>{var r=n(5005);t.exports=r("navigator","userAgent")||""},7392:(t,e,n)=>{var r,i,o=n(7854),a=n(8113),s=o.process,c=s&&s.versions,u=c&&c.v8;u?i=(r=u.split("."))[0]<4?1:r[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},748:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(t,e,n)=>{var r=n(7854),i=n(1236).f,o=n(8880),a=n(1320),s=n(3505),c=n(9920),u=n(4705);t.exports=function(t,e){var n,l,h,f,p,v=t.target,d=t.global,m=t.stat;if(n=d?r:m?r[v]||s(v,{}):(r[v]||{}).prototype)for(l in e){if(f=e[l],h=t.noTargetGet?(p=i(n,l))&&p.value:n[l],!u(d?l:v+(m?".":"#")+l,t.forced)&&void 0!==h){if(typeof f==typeof h)continue;c(f,h)}(t.sham||h&&h.sham)&&o(f,"sham",!0),a(n,l,f,t)}}},7293:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},9974:(t,e,n)=>{var r=n(3099);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},5005:(t,e,n)=>{var r=n(857),i=n(7854),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},1246:(t,e,n)=>{var r=n(648),i=n(7497),o=n(5112)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},8554:(t,e,n)=>{var r=n(9670),i=n(1246);t.exports=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},4647:(t,e,n)=>{var r=n(1913),i=n(8554);t.exports=r?i:function(t){return Map.prototype.entries.call(t)}},7854:(t,e,n)=>{var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},6656:(t,e,n)=>{var r=n(7908),i={}.hasOwnProperty;t.exports=Object.hasOwn||function(t,e){return i.call(r(t),e)}},3501:t=>{t.exports={}},842:(t,e,n)=>{var r=n(7854);t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},490:(t,e,n)=>{var r=n(5005);t.exports=r("document","documentElement")},4664:(t,e,n)=>{var r=n(9781),i=n(7293),o=n(317);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:(t,e,n)=>{var r=n(7293),i=n(4326),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},2788:(t,e,n)=>{var r=n(5465),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},9909:(t,e,n)=>{var r,i,o,a=n(8536),s=n(7854),c=n(111),u=n(8880),l=n(6656),h=n(5465),f=n(6200),p=n(3501),v="Object already initialized",d=s.WeakMap;if(a||h.state){var m=h.state||(h.state=new d),g=m.get,y=m.has,x=m.set;r=function(t,e){if(y.call(m,t))throw new TypeError(v);return e.facade=t,x.call(m,t,e),e},i=function(t){return g.call(m,t)||{}},o=function(t){return y.call(m,t)}}else{var w=f("state");p[w]=!0,r=function(t,e){if(l(t,w))throw new TypeError(v);return e.facade=t,u(t,w,e),e},i=function(t){return l(t,w)?t[w]:{}},o=function(t){return l(t,w)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},7659:(t,e,n)=>{var r=n(5112),i=n(7497),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},4705:(t,e,n)=>{var r=n(7293),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==u||n!=c&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},111:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},1913:t=>{t.exports=!1},408:(t,e,n)=>{var r=n(9670),i=n(7659),o=n(7466),a=n(9974),s=n(1246),c=n(9212),u=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,n){var l,h,f,p,v,d,m,g=n&&n.that,y=!(!n||!n.AS_ENTRIES),x=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),E=a(e,g,1+y+w),S=function(t){return l&&c(l),new u(!0,t)},b=function(t){return y?(r(t),w?E(t[0],t[1],S):E(t[0],t[1])):w?E(t,S):E(t)};if(x)l=t;else{if("function"!=typeof(h=s(t)))throw TypeError("Target is not iterable");if(i(h)){for(f=0,p=o(t.length);p>f;f++)if((v=b(t[f]))&&v instanceof u)return v;return new u(!1)}l=h.call(t)}for(d=l.next;!(m=d.call(l)).done;){try{v=b(m.value)}catch(t){throw c(l),t}if("object"==typeof v&&v&&v instanceof u)return v}return new u(!1)}},9212:(t,e,n)=>{var r=n(9670);t.exports=function(t){var e=t.return;if(void 0!==e)return r(e.call(t)).value}},3383:(t,e,n)=>{"use strict";var r,i,o,a=n(7293),s=n(9518),c=n(8880),u=n(6656),l=n(5112),h=n(1913),f=l("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(i=s(s(o)))!==Object.prototype&&(r=i):p=!0);var v=null==r||a((function(){var t={};return r[f].call(t)!==t}));v&&(r={}),h&&!v||u(r,f)||c(r,f,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},7497:t=>{t.exports={}},5948:(t,e,n)=>{var r,i,o,a,s,c,u,l,h=n(7854),f=n(1236).f,p=n(261).set,v=n(6833),d=n(1036),m=n(5268),g=h.MutationObserver||h.WebKitMutationObserver,y=h.document,x=h.process,w=h.Promise,E=f(h,"queueMicrotask"),S=E&&E.value;S||(r=function(){var t,e;for(m&&(t=x.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?a():o=void 0,t}}o=void 0,t&&t.enter()},v||m||d||!g||!y?w&&w.resolve?((u=w.resolve(void 0)).constructor=w,l=u.then,a=function(){l.call(u,r)}):a=m?function(){x.nextTick(r)}:function(){p.call(h,r)}:(s=!0,c=y.createTextNode(""),new g(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),t.exports=S||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},3366:(t,e,n)=>{var r=n(7854);t.exports=r.Promise},133:(t,e,n)=>{var r=n(7392),i=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},8536:(t,e,n)=>{var r=n(7854),i=n(2788),o=r.WeakMap;t.exports="function"==typeof o&&/native code/.test(i(o))},8523:(t,e,n)=>{"use strict";var r=n(3099),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},30:(t,e,n)=>{var r,i=n(9670),o=n(6048),a=n(748),s=n(3501),c=n(490),u=n(317),l=n(6200)("IE_PROTO"),h=function(){},f=function(t){return"<script>"+t+"<\/script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;p=r?function(t){t.write(f("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=u("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(f("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete p.prototype[a[n]];return p()};s[l]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h.prototype=i(t),n=new h,h.prototype=null,n[l]=t):n=p(),void 0===e?n:o(n,e)}},6048:(t,e,n)=>{var r=n(9781),i=n(3070),o=n(9670),a=n(1956);t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),s=r.length,c=0;s>c;)i.f(t,n=r[c++],e[n]);return t}},3070:(t,e,n)=>{var r=n(9781),i=n(4664),o=n(9670),a=n(7593),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:(t,e,n)=>{var r=n(9781),i=n(5296),o=n(9114),a=n(5656),s=n(7593),c=n(6656),u=n(4664),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),u)try{return l(t,e)}catch(t){}if(c(t,e))return o(!i.f.call(t,e),t[e])}},8006:(t,e,n)=>{var r=n(6324),i=n(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},5181:(t,e)=>{e.f=Object.getOwnPropertySymbols},9518:(t,e,n)=>{var r=n(6656),i=n(7908),o=n(6200),a=n(8544),s=o("IE_PROTO"),c=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},6324:(t,e,n)=>{var r=n(6656),i=n(5656),o=n(1318).indexOf,a=n(3501);t.exports=function(t,e){var n,s=i(t),c=0,u=[];for(n in s)!r(a,n)&&r(s,n)&&u.push(n);for(;e.length>c;)r(s,n=e[c++])&&(~o(u,n)||u.push(n));return u}},1956:(t,e,n)=>{var r=n(6324),i=n(748);t.exports=Object.keys||function(t){return r(t,i)}},5296:(t,e)=>{"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},7674:(t,e,n)=>{var r=n(9670),i=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},3887:(t,e,n)=>{var r=n(5005),i=n(8006),o=n(5181),a=n(9670);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},857:(t,e,n)=>{var r=n(7854);t.exports=r},2534:t=>{t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},9478:(t,e,n)=>{var r=n(9670),i=n(111),o=n(8523);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},2248:(t,e,n)=>{var r=n(1320);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},1320:(t,e,n)=>{var r=n(7854),i=n(8880),o=n(6656),a=n(3505),s=n(2788),c=n(9909),u=c.get,l=c.enforce,h=String(String).split("String");(t.exports=function(t,e,n,s){var c,u=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,p=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),(c=l(n)).source||(c.source=h.join("string"==typeof e?e:""))),t!==r?(u?!p&&t[e]&&(f=!0):delete t[e],f?t[e]=n:i(t,e,n)):f?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},4488:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},6465:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},3505:(t,e,n)=>{var r=n(7854),i=n(8880);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},6340:(t,e,n)=>{"use strict";var r=n(5005),i=n(3070),o=n(5112),a=n(9781),s=o("species");t.exports=function(t){var e=r(t),n=i.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},8003:(t,e,n)=>{var r=n(3070).f,i=n(6656),o=n(5112)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},6200:(t,e,n)=>{var r=n(2309),i=n(9711),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},5465:(t,e,n)=>{var r=n(7854),i=n(3505),o="__core-js_shared__",a=r[o]||i(o,{});t.exports=a},2309:(t,e,n)=>{var r=n(1913),i=n(5465);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.14.0",mode:r?"pure":"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})},6707:(t,e,n)=>{var r=n(9670),i=n(3099),o=n(5112)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},261:(t,e,n)=>{var r,i,o,a=n(7854),s=n(7293),c=n(9974),u=n(490),l=n(317),h=n(6833),f=n(5268),p=a.location,v=a.setImmediate,d=a.clearImmediate,m=a.process,g=a.MessageChannel,y=a.Dispatch,x=0,w={},E=function(t){if(w.hasOwnProperty(t)){var e=w[t];delete w[t],e()}},S=function(t){return function(){E(t)}},b=function(t){E(t.data)},T=function(t){a.postMessage(t+"",p.protocol+"//"+p.host)};v&&d||(v=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return w[++x]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(x),x},d=function(t){delete w[t]},f?r=function(t){m.nextTick(S(t))}:y&&y.now?r=function(t){y.now(S(t))}:g&&!h?(o=(i=new g).port2,i.port1.onmessage=b,r=c(o.postMessage,o,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&p&&"file:"!==p.protocol&&!s(T)?(r=T,a.addEventListener("message",b,!1)):r="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),E(t)}}:function(t){setTimeout(S(t),0)}),t.exports={set:v,clear:d}},1400:(t,e,n)=>{var r=n(9958),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},5656:(t,e,n)=>{var r=n(8361),i=n(4488);t.exports=function(t){return r(i(t))}},9958:t=>{var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},7466:(t,e,n)=>{var r=n(9958),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},7908:(t,e,n)=>{var r=n(4488);t.exports=function(t){return Object(r(t))}},7593:(t,e,n)=>{var r=n(111);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},1694:(t,e,n)=>{var r={};r[n(5112)("toStringTag")]="z",t.exports="[object z]"===String(r)},9711:t=>{var e=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+n).toString(36)}},3307:(t,e,n)=>{var r=n(133);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:(t,e,n)=>{var r=n(7854),i=n(2309),o=n(6656),a=n(9711),s=n(133),c=n(3307),u=i("wks"),l=r.Symbol,h=c?l:l&&l.withoutSetter||a;t.exports=function(t){return o(u,t)&&(s||"string"==typeof u[t])||(s&&o(l,t)?u[t]=l[t]:u[t]=h("Symbol."+t)),u[t]}},6992:(t,e,n)=>{"use strict";var r=n(5656),i=n(1223),o=n(7497),a=n(9909),s=n(654),c="Array Iterator",u=a.set,l=a.getterFor(c);t.exports=s(Array,"Array",(function(t,e){u(this,{type:c,target:r(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},8674:(t,e,n)=>{"use strict";var r,i,o,a,s=n(2109),c=n(1913),u=n(7854),l=n(5005),h=n(3366),f=n(1320),p=n(2248),v=n(7674),d=n(8003),m=n(6340),g=n(111),y=n(3099),x=n(5787),w=n(2788),E=n(408),S=n(7072),b=n(6707),T=n(261).set,L=n(5948),I=n(9478),A=n(842),O=n(8523),_=n(2534),R=n(9909),j=n(4705),P=n(5112),M=n(7871),C=n(5268),F=n(7392),N=P("species"),W="Promise",z=R.get,k=R.set,H=R.getterFor(W),D=h&&h.prototype,q=h,Y=D,U=u.TypeError,B=u.document,X=u.process,$=O.f,G=$,V=!!(B&&B.createEvent&&u.dispatchEvent),K="function"==typeof PromiseRejectionEvent,J="unhandledrejection",Q=!1,Z=j(W,(function(){var t=w(q)!==String(q);if(!t&&66===F)return!0;if(c&&!Y.finally)return!0;if(F>=51&&/native code/.test(q))return!1;var e=new q((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};return(e.constructor={})[N]=n,!(Q=e.then((function(){}))instanceof n)||!t&&M&&!K})),tt=Z||!S((function(t){q.all(t).catch((function(){}))})),et=function(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e},nt=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;L((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,c,u=n[o++],l=i?u.ok:u.fail,h=u.resolve,f=u.reject,p=u.domain;try{l?(i||(2===t.rejection&&at(t),t.rejection=1),!0===l?a=r:(p&&p.enter(),a=l(r),p&&(p.exit(),c=!0)),a===u.promise?f(U("Promise-chain cycle")):(s=et(a))?s.call(a,h,f):h(a)):f(r)}catch(t){p&&!c&&p.exit(),f(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&it(t)}))}},rt=function(t,e,n){var r,i;V?((r=B.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),u.dispatchEvent(r)):r={promise:e,reason:n},!K&&(i=u["on"+t])?i(r):t===J&&A("Unhandled promise rejection",n)},it=function(t){T.call(u,(function(){var e,n=t.facade,r=t.value;if(ot(t)&&(e=_((function(){C?X.emit("unhandledRejection",r,n):rt(J,n,r)})),t.rejection=C||ot(t)?2:1,e.error))throw e.value}))},ot=function(t){return 1!==t.rejection&&!t.parent},at=function(t){T.call(u,(function(){var e=t.facade;C?X.emit("rejectionHandled",e):rt("rejectionhandled",e,t.value)}))},st=function(t,e,n){return function(r){t(e,r,n)}},ct=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,nt(t,!0))},ut=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw U("Promise can't be resolved itself");var r=et(e);r?L((function(){var n={done:!1};try{r.call(e,st(ut,n,t),st(ct,n,t))}catch(e){ct(n,e,t)}})):(t.value=e,t.state=1,nt(t,!1))}catch(e){ct({done:!1},e,t)}}};if(Z&&(Y=(q=function(t){x(this,q,W),y(t),r.call(this);var e=z(this);try{t(st(ut,e),st(ct,e))}catch(t){ct(e,t)}}).prototype,(r=function(t){k(this,{type:W,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(Y,{then:function(t,e){var n=H(this),r=$(b(this,q));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=C?X.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&nt(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=z(t);this.promise=t,this.resolve=st(ut,e),this.reject=st(ct,e)},O.f=$=function(t){return t===q||t===o?new i(t):G(t)},!c&&"function"==typeof h&&D!==Object.prototype)){a=D.then,Q||(f(D,"then",(function(t,e){var n=this;return new q((function(t,e){a.call(n,t,e)})).then(t,e)}),{unsafe:!0}),f(D,"catch",Y.catch,{unsafe:!0}));try{delete D.constructor}catch(t){}v&&v(D,Y)}s({global:!0,wrap:!0,forced:Z},{Promise:q}),d(q,W,!1,!0),m(W),o=l(W),s({target:W,stat:!0,forced:Z},{reject:function(t){var e=$(this);return e.reject.call(void 0,t),e.promise}}),s({target:W,stat:!0,forced:c||Z},{resolve:function(t){return I(c&&this===o?q:this,t)}}),s({target:W,stat:!0,forced:tt},{all:function(t){var e=this,n=$(e),r=n.resolve,i=n.reject,o=_((function(){var n=y(e.resolve),o=[],a=0,s=1;E(t,(function(t){var c=a++,u=!1;o.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,o[c]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=$(e),r=n.reject,i=_((function(){var i=y(e.resolve);E(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},72:(t,e,n)=>{"use strict";var r=n(2109),i=n(1913),o=n(4092);r({target:"Map",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},9137:(t,e,n)=>{"use strict";var r=n(2109),i=n(1913),o=n(9670),a=n(9974),s=n(4647),c=n(408);r({target:"Map",proto:!0,real:!0,forced:i},{every:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return!c(n,(function(t,n,i){if(!r(n,t,e))return i()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},1957:(t,e,n)=>{"use strict";var r=n(2109),i=n(1913),o=n(5005),a=n(9670),s=n(3099),c=n(9974),u=n(6707),l=n(4647),h=n(408);r({target:"Map",proto:!0,real:!0,forced:i},{filter:function(t){var e=a(this),n=l(e),r=c(t,arguments.length>1?arguments[1]:void 0,3),i=new(u(e,o("Map"))),f=s(i.set);return h(n,(function(t,n){r(n,t,e)&&f.call(i,t,n)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}})},103:(t,e,n)=>{"use strict";var r=n(2109),i=n(1913),o=n(9670),a=n(9974),s=n(4647),c=n(408);r({target:"Map",proto:!0,real:!0,forced:i},{findKey:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return c(n,(function(t,n,i){if(r(n,t,e))return i(t)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},6306:(t,e,n)=>{"use strict";var r=n(2109),i=n(1913),o=n(9670),a=n(9974),s=n(4647),c=n(408);r({target:"Map",proto:!0,real:!0,forced:i},{find:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return c(n,(function(t,n,i){if(r(n,t,e))return i(n)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},4592:(t,e,n)=>{"use strict";var r=n(2109),i=n(1913),o=n(9670),a=n(4647),s=n(6465),c=n(408);r({target:"Map",proto:!0,real:!0,forced:i},{includes:function(t){return c(a(o(this)),(function(e,n,r){if(s(n,t))return r()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},8276:(t,e,n)=>{"use strict";var r=n(2109),i=n(1913),o=n(9670),a=n(4647),s=n(408);r({target:"Map",proto:!0,real:!0,forced:i},{keyOf:function(t){return s(a(o(this)),(function(e,n,r){if(n===t)return r(e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},5082:(t,e,n)=>{"use strict";var r=n(2109),i=n(1913),o=n(5005),a=n(9670),s=n(3099),c=n(9974),u=n(6707),l=n(4647),h=n(408);r({target:"Map",proto:!0,real:!0,forced:i},{mapKeys:function(t){var e=a(this),n=l(e),r=c(t,arguments.length>1?arguments[1]:void 0,3),i=new(u(e,o("Map"))),f=s(i.set);return h(n,(function(t,n){f.call(i,r(n,t,e),n)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}})},2813:(t,e,n)=>{"use strict";var r=n(2109),i=n(1913),o=n(5005),a=n(9670),s=n(3099),c=n(9974),u=n(6707),l=n(4647),h=n(408);r({target:"Map",proto:!0,real:!0,forced:i},{mapValues:function(t){var e=a(this),n=l(e),r=c(t,arguments.length>1?arguments[1]:void 0,3),i=new(u(e,o("Map"))),f=s(i.set);return h(n,(function(t,n){f.call(i,t,r(n,t,e))}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}})},8222:(t,e,n)=>{"use strict";var r=n(2109),i=n(1913),o=n(9670),a=n(3099),s=n(408);r({target:"Map",proto:!0,real:!0,forced:i},{merge:function(t){for(var e=o(this),n=a(e.set),r=0;r<arguments.length;)s(arguments[r++],n,{that:e,AS_ENTRIES:!0});return e}})},8563:(t,e,n)=>{"use strict";var r=n(2109),i=n(1913),o=n(9670),a=n(3099),s=n(4647),c=n(408);r({target:"Map",proto:!0,real:!0,forced:i},{reduce:function(t){var e=o(this),n=s(e),r=arguments.length<2,i=r?void 0:arguments[1];if(a(t),c(n,(function(n,o){r?(r=!1,i=o):i=t(i,o,n,e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty map with no initial value");return i}})},336:(t,e,n)=>{"use strict";var r=n(2109),i=n(1913),o=n(9670),a=n(9974),s=n(4647),c=n(408);r({target:"Map",proto:!0,real:!0,forced:i},{some:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return c(n,(function(t,n,i){if(r(n,t,e))return i()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},7512:(t,e,n)=>{"use strict";var r=n(2109),i=n(1913),o=n(9670),a=n(3099);r({target:"Map",proto:!0,real:!0,forced:i},{update:function(t,e){var n=o(this),r=arguments.length;a(e);var i=n.has(t);if(!i&&r<3)throw TypeError("Updating absent value");var s=i?n.get(t):a(r>2?arguments[2]:void 0)(t,n);return n.set(t,e(s,t,n)),n}})},3948:(t,e,n)=>{var r=n(7854),i=n(8324),o=n(6992),a=n(8880),s=n(5112),c=s("iterator"),u=s("toStringTag"),l=o.values;for(var h in i){var f=r[h],p=f&&f.prototype;if(p){if(p[c]!==l)try{a(p,c,l)}catch(t){p[c]=l}if(p[u]||a(p,u,h),i[h])for(var v in o)if(p[v]!==o[v])try{a(p,v,o[v])}catch(t){p[v]=o[v]}}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{default:()=>e}),n(8674),n(3948),n(72),n(9137),n(1957),n(6306),n(103),n(4592),n(8276),n(5082),n(2813),n(8222),n(8563),n(336),n(7512);const t=function(t,e,n,r,i,o,a,s){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=[],u._compiled=!0),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,c):[c]}return{exports:t,options:u}}({name:"me-image-crop",props:{imageSrc:{type:String,required:!0},showBtn:{type:Boolean,default:!0},outType:{type:String,default:"base64"}},data:()=>({browser:"",wt:null,canvas:null,ctx:null,canvasWidth:0,canvasHeight:0,cropFrameSize:0,buttonTop:0,buttonRight:0,buttonSize:30,waitingAni:{size:5,colors:["#e2e2e2","#a2a2a2","#a2a2a2"],timer:0,start:!1},img:null,imgNaturalWidth:0,imgNaturalHeight:0,scale:1,scaleRate:0,position:{x:0,y:0},rotateAngle:0,AnimationFrameId:""}),created(){this.wt=this.watchTouch(),this.wt.watch();try{window.addEventListener("touchmove",this.forbidPageScale,{passive:!1})}catch(t){window.addEventListener("touchmove",this.forbidPageScale)}if(this.is_pc()){let t="",e=window.navigator.userAgent.toLowerCase();e.indexOf("trident/7.0")>-1?t="ie":e.indexOf("opera")>-1?t="opera":e.indexOf("safari")>-1&&-1===e.indexOf("chrome")?t="safari":e.indexOf("chrome")>-1?t="chrome":e.indexOf("firefox")>-1&&(t="firefox"),this.browser=t}this.$nextTick((()=>{Promise.all([this.initCanvas(),this.imgLoad()]).then((()=>{this.scaleImg(),this.translateImg(),this.rotateImg()})),this.AnimationFrameId=window.requestAnimationFrame(this.draw)}))},watch:{showBtn(t,e){t&&this.$nextTick(this.rotateImg_pc)}},methods:{forbidPageScale(t){(t=t||window.event).preventDefault()},is_pc(){let t=["android","iphone","symbianOS","windows phone","ipad","ipod"],e=window.navigator.userAgent.toLowerCase(),n=!0;for(let r=0;r<t.length;r++)e.indexOf(t[r])>=0&&(n=!1);return n},watchTouch(){let t=new Map;const e=e=>{t.set(e.changedTouches[0].identifier,e.changedTouches[0])},n=e=>{Array.from(e.touches).map((e=>{t.has(e.identifier)&&t.set(e.identifier,e)}))},r=e=>{t.delete(e.changedTouches[0].identifier)},i=e=>{t.clear()};return{watch(){window.addEventListener("touchstart",e,!0),window.addEventListener("touchmove",n,!0),window.addEventListener("touchend",r,!0),window.addEventListener("touchcancel",i,!0)},dispose(){window.removeEventListener("touchstart",e),window.removeEventListener("touchmove",n),window.removeEventListener("touchend",r),window.removeEventListener("touchcancel",i)},touchMap:t}},initCanvas(){let t=window.getComputedStyle(this.$refs.meImageCrop,null).getPropertyValue("height"),e=window.getComputedStyle(this.$refs.meImageCrop,null).getPropertyValue("width");return this.canvasHeight=parseInt(t),this.canvasWidth=parseInt(e),this.canvas=this.$refs.meImageCrop.querySelector(".me-image-crop-canvas"),this.canvas.height=this.canvasHeight,this.canvas.width=this.canvasWidth,this.ctx=this.canvas.getContext("2d"),this.cropFrameSize=this.canvasWidth<this.canvasHeight?.7*this.canvasWidth:.7*this.canvasHeight,this.buttonTop=this.canvasHeight/30>30?30:this.canvasHeight/30<20?20:this.canvasHeight/30,this.buttonRight=((this.canvasWidth-this.cropFrameSize)/2-this.buttonSize)/2,this.buttonRight=this.buttonRight>30?30:this.buttonRight<10?10:this.buttonRight,this.position.x=this.canvasWidth/2,this.position.y=this.canvasHeight/2,Promise.resolve()},imgLoad(){return new Promise(((t,e)=>{this.img=document.createElement("img"),this.img.src=this.imageSrc,this.img.onload=()=>{this.imgNaturalWidth=this.img.naturalWidth,this.imgNaturalHeight=this.img.naturalHeight;let e=this.canvasWidth/this.imgNaturalWidth,n=this.canvasHeight/this.imgNaturalHeight;this.scale=e<n?e:n,t()}}))},drawCropFrame(){let t=[{x:0,y:0},{x:this.canvasWidth,y:0},{x:this.canvasWidth,y:this.canvasHeight},{x:0,y:this.canvasHeight}],e=[{x:parseInt(this.canvasWidth/2-this.cropFrameSize/2)+.5,y:parseInt(this.canvasHeight/2-this.cropFrameSize/2)+.5},{x:parseInt(this.canvasWidth/2+this.cropFrameSize/2)+.5,y:parseInt(this.canvasHeight/2-this.cropFrameSize/2)+.5},{x:parseInt(this.canvasWidth/2+this.cropFrameSize/2)+.5,y:parseInt(this.canvasHeight/2+this.cropFrameSize/2)+.5},{x:parseInt(this.canvasWidth/2-this.cropFrameSize/2)+.5,y:parseInt(this.canvasHeight/2+this.cropFrameSize/2)+.5}];this.ctx.save(),this.ctx.fillStyle="rgba(0,0,0,0.35)",this.ctx.beginPath(),this.ctx.moveTo(t[0].x,t[0].y),this.ctx.lineTo(e[0].x,e[0].y),this.ctx.lineTo(e[1].x,e[1].y),this.ctx.lineTo(e[2].x,e[2].y),this.ctx.lineTo(e[3].x,e[3].y),this.ctx.lineTo(e[0].x,e[0].y),this.ctx.lineTo(t[0].x,t[0].y),this.ctx.lineTo(t[3].x,t[3].y),this.ctx.lineTo(t[2].x,t[2].y),this.ctx.lineTo(t[1].x,t[1].y),this.ctx.fill(),this.ctx.restore(),this.ctx.save(),this.ctx.strokeStyle="#fff",this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(e[0].x,e[0].y),this.ctx.lineTo(e[1].x,e[1].y),this.ctx.lineTo(e[2].x,e[2].y),this.ctx.lineTo(e[3].x,e[3].y),this.ctx.closePath(),this.ctx.stroke(),this.ctx.restore()},scaleImg(){let t,e,n,r,i=!1;const o=o=>{if(!i)if(o=o||window.event,this.is_pc())i=!0;else{let o=[];if([...this.wt.touchMap.values()].map((t=>{t.target===this.$refs.meImageCrop.querySelector(".me-image-crop-canvas")&&o.push(t)})),2===o.length&&!1===i){i=!0,r=this.scale,e=o[0].identifier,n=o[1].identifier;let a=o[0].clientX,s=o[0].clientY,c=o[1].clientX,u=o[1].clientY;t=Math.sqrt((a-c)*(a-c)+(s-u)*(s-u))}}},a=o=>{if(this.is_pc()){let t=document.querySelector(".me-image-crop-canvas");!t||!t.contains(o.target)&&t!==o.target||this.scaleStart||(i=!0)}if(i)if(o=o||window.event,this.is_pc()){let t="";t="firefox"===this.browser?o.detail<0?"up":"down":o.wheelDelta>0?"up":"down",this.scale="up"===t?1.1*this.scale:.9*this.scale}else{let i,a;for(let t=0;t<o.touches.length;t++)o.touches[t].identifier===e&&(i=o.touches[t]),o.touches[t].identifier===n&&(a=o.touches[t]);if(!i||!a)return;let s=i.clientX,c=i.clientY,u=a.clientX,l=a.clientY,h=Math.sqrt((s-u)*(s-u)+(c-l)*(c-l));this.scale=r*(h/t)}},s=o=>{if(i)if(o=o||window.event,this.is_pc())i=!1,t=void 0,e=void 0,n=void 0,r=void 0;else{let a,s;for(let t=0;t<o.touches.length;t++)o.touches[t].identifier===e&&(a=o.touches[t]),o.touches[t].identifier===n&&(s=o.touches[t]);"touchcancel"!==o.type&&a&&s||(i=!1,t=void 0,e=void 0,n=void 0,r=void 0)}};this.canvas.addEventListener("mouseover",o),window.addEventListener("DOMMouseScroll",a),window.addEventListener("mousewheel",a),this.canvas.addEventListener("mouseout",s),this.canvas.addEventListener("touchmove",o),this.canvas.addEventListener("touchmove",a),document.addEventListener("touchend",s),document.addEventListener("touchcancel",s),this._disposeScale=()=>{this.canvas.removeEventListener("mouseenter",o),window.removeEventListener("DOMMouseScroll",a),window.removeEventListener("mousewheel",a),this.canvas.removeEventListener("mouseleave",s),this.canvas.removeEventListener("touchmove",o),this.canvas.removeEventListener("touchmove",a),document.removeEventListener("touchend",s),document.removeEventListener("touchcancel",s)}},translateImg(){let t,e=!1,n={x:0,y:0},r={x:0,y:0};const i=i=>{if(!e)if(i=i||window.event,this.is_pc())e=!0,r.x=this.position.x,r.y=this.position.y,n.x=i.clientX,n.y=i.clientY;else{let i=[],o=[...this.wt.touchMap.values()];o.map((t=>{t.target===this.$refs.meImageCrop.querySelector(".me-image-crop-canvas")&&i.push(t)})),1===i.length&&1===o.length&&!1===e&&(e=!0,r.x=this.position.x,r.y=this.position.y,t=i[0].identifier,n.x=i[0].clientX,n.y=i[0].clientY)}},o=i=>{if(e)if(i=i||window.event,this.is_pc()){let t=i.clientX-n.x,e=i.clientY-n.y;this.position.x=r.x+t,this.position.y=r.y+e}else{let e;for(let n=0;n<i.touches.length;n++)i.touches[n].identifier===t&&(e=i.touches[n]);if(!e)return;let o=e.clientX-n.x,a=e.clientY-n.y;this.position.x=r.x+o,this.position.y=r.y+a}},a=i=>{e&&(e=!1,r.x=0,r.y=0,n.x=0,n.y=0,t=void 0)};this.canvas.addEventListener("mousemove",o),this.canvas.addEventListener("mousedown",i),document.addEventListener("mouseup",a),document.addEventListener("mousecancel",a),this.canvas.addEventListener("touchmove",i),this.canvas.addEventListener("touchmove",o),document.addEventListener("touchend",a),document.addEventListener("touchcancel",a),document.addEventListener("touchstart",a),this._disposeTranslate=()=>{this.canvas.removeEventListener("mousemove",o),this.canvas.removeEventListener("click",i),document.removeEventListener("mouseup",a),document.removeEventListener("mousecancel",a),this.canvas.removeEventListener("touchmove",i),this.canvas.removeEventListener("touchmove",o),document.removeEventListener("touchend",a),document.removeEventListener("touchcancel",a),document.removeEventListener("touchstart",a)}},rotateImg(){this.is_pc()&&this.showBtn?this.rotateImg_pc():this.rotateImg_mobile()},rotateImg_pc(){let t=this.$refs.meImageCrop.querySelector(".me-image-crop-btn-rotate");if(!t)return;let e=!0,n=!0;t.addEventListener("click",(()=>{n?this.rotateAngle++:this.rotateAngle--}));let r=function(t){if(!(t instanceof HTMLElement||t===window))return;let e,n,r={},i=0;function o(t){i=1,window.removeEventListener("click",o),window.removeEventListener("mouseup",o),window.removeEventListener("mousecancel",o),e&&clearTimeout(e)}function a(t){window.removeEventListener("click",a),window.removeEventListener("mouseup",a),window.removeEventListener("mousecancel",a),n&&clearInterval(n),r.longtabover&&r.longtabover.map((t=>{t()}))}return t.addEventListener("mousedown",(()=>{i=0,window.addEventListener("click",o),window.addEventListener("mouseup",o),window.addEventListener("mousecancel",o),e=setTimeout((()=>{window.removeEventListener("click",o),window.removeEventListener("mouseup",o),window.removeEventListener("mousecancel",o),0===i&&(i=2,r.longtabstart&&r.longtabstart.map((t=>{t()})),n=setInterval((()=>{r.longtabing&&r.longtabing.map((t=>{t()}))}),50),window.addEventListener("click",a),window.addEventListener("mouseup",a),window.addEventListener("mousecancel",a))}),500)})),{addEventListener:function(t,e){r[t]?r[t].push(e):r[t]=[e]}}}(t);r.addEventListener("longtabstart",(()=>{e?e=!1:n=!n})),r.addEventListener("longtabing",(()=>{this.rotateAngle+=n?3:-3}))},rotateImg_mobile(){let t,e,n=!1,r=null,i={x:null,y:null};const o=o=>{if(n)return;o=o||window.event;let a=[];[...this.wt.touchMap.values()].map((t=>{t.target===this.$refs.meImageCrop.querySelector(".me-image-crop-canvas")&&a.push(t)})),2===a.length&&!1===n&&(n=!0,r=this.rotateAngle,t=a[0].identifier,e=a[1].identifier,i.x=a[1].clientX-a[0].clientX,i.y=a[1].clientY-a[0].clientY)},a=o=>{if(!n)return;let a,s;o=o||window.event;for(let n=0;n<o.touches.length;n++)o.touches[n].identifier===t&&(a=o.touches[n]),o.touches[n].identifier===e&&(s=o.touches[n]);if(!a||!s)return;let c={x:null,y:null};c.x=s.clientX-a.clientX,c.y=s.clientY-a.clientY;let u=Math.acos((i.x*c.x+i.y*c.y)/(Math.sqrt(i.x*i.x+i.y*i.y)*Math.sqrt(c.x*c.x+c.y*c.y)));if(u=180/Math.PI*u,Number.isNaN(u))return;let l=i.x*c.y-i.y*c.x;this.rotateAngle=l>=0?r+u:r-u},s=o=>{if(!n)return;let a,s;o=o||window.event;for(let n=0;n<o.touches.length;n++)o.touches[n].identifier===t&&(a=o.touches[n]),o.touches[n].identifier===e&&(s=o.touches[n]);"touchcancel"!==o.type&&a&&s||(n=!1,i.x=null,i.y=null,t=null,e=null,r=null)};this.canvas.addEventListener("touchstart",o),this.canvas.addEventListener("touchmove",a),document.addEventListener("touchend",s),document.addEventListener("touchcancel",s),this._disposeRotate=()=>{this.canvas.removeEventListener("touchstart",o),this.canvas.removeEventListener("touchmove",a),document.removeEventListener("touchend",s),document.removeEventListener("touchcancel",s)}},cancelCrop(){this.$emit("cancel-crop-image")},confirmCrop(){if(this.waitingAni.start)return;this.startWaitingAni();let t={x:parseInt(this.canvasWidth/2-(this.cropFrameSize-2)/2)+.5,y:parseInt(this.canvasHeight/2-(this.cropFrameSize-2)/2)+.5},e=this.ctx.getImageData(t.x,t.y,this.cropFrameSize-2,this.cropFrameSize-2),n=document.createElement("canvas");n.width=this.cropFrameSize,n.height=this.cropFrameSize,n.getContext("2d").putImageData(e,0,0),"base64"===this.outType?(this.closeWaitingAni(),this.$emit("confirm-crop-image",n.toDataURL())):n.toBlob((t=>{this.closeWaitingAni(),this.$emit("confirm-crop-image",t)}),"image/jpg",1)},getImage(t){let e={x:parseInt(this.canvasWidth/2-(this.cropFrameSize-2)/2)+.5,y:parseInt(this.canvasHeight/2-(this.cropFrameSize-2)/2)+.5},n=this.ctx.getImageData(e.x,e.y,this.cropFrameSize-2,this.cropFrameSize-2),r=document.createElement("canvas");if(r.width=this.cropFrameSize,r.height=this.cropFrameSize,r.getContext("2d").putImageData(n,0,0),"base64"===this.outType)return this.closeWaitingAni(),r.toDataURL();this.closeWaitingAni(),r.toBlob(t,"image/jpg",1)},startWaitingAni(){this.waitingAni.start=!0,this.waitingAni.timer=setInterval((()=>{let t=this.waitingAni.colors[2];this.waitingAni.colors.splice(2,1),this.waitingAni.colors.unshift(t)}),250)},closeWaitingAni(){this.waitingAni.start=!1,clearInterval(this.waitingAni.timer)},draw(){if(!this.canvas||!this.img)return;this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.ctx.save(),this.position.x,this.imgNaturalWidth,this.scale,this.position.y,this.imgNaturalHeight,this.scale;let t=this.imgNaturalWidth*this.scale,e=this.imgNaturalHeight*this.scale;if(this.ctx.translate(this.position.x,this.position.y),this.ctx.rotate(this.rotateAngle*(Math.PI/180)),this.ctx.drawImage(this.img,-t/2,-e/2,t,e),this.ctx.restore(),this.drawCropFrame(),this.waitingAni.start)for(let t=0;t<this.waitingAni.colors.length;t++){let e,n;this.ctx.save(),this.ctx.fillStyle=this.waitingAni.colors[t],this.ctx.beginPath(),0===t?(e=this.canvasWidth/2-15,n=this.canvasHeight/2):1===t?(e=this.canvasWidth/2,n=this.canvasHeight/2):(e=this.canvasWidth/2+15,n=this.canvasHeight/2),this.ctx.arc(e,n,this.waitingAni.size,0,2*Math.PI,!0),this.ctx.fill(),this.ctx.restore()}this.AnimationFrameId=window.requestAnimationFrame(this.draw)}},mounted(){},beforeDestroy(){this.wt.dispose(),window.removeEventListener("touchmove",this.forbidPageScale),window.cancelAnimationFrame(this.AnimationFrameId),this._disposeScale(),this._disposeTranslate(),!this.is_pc()&&this._disposeRotate(),this.closeWaitingAni()}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"meImageCrop",staticClass:"me-image-crop"},[n("canvas",{staticClass:"me-image-crop-canvas"}),t._v(" "),n("div",{staticClass:"me-image-crop-btns",style:{top:t.buttonTop+"px",right:t.buttonRight+"px"}},[t.showBtn&&t.is_pc()?n("div",{staticClass:"me-image-crop-btn me-image-crop-btn-rotate"},[t._t("rotate",(function(){return[n("span",{staticClass:"me-icon me-icon-rotate2",style:{fontSize:t.buttonSize+"px",color:"#DAA520"},attrs:{alt:""}})]}))],2):t._e(),t._v(" "),t.showBtn?n("div",{staticClass:"me-image-crop-btn",on:{click:t.cancelCrop}},[t._t("cancel",(function(){return[n("span",{staticClass:"me-icon me-icon-cancel",style:{fontSize:t.buttonSize+"px",color:"#E56149"},attrs:{alt:""}})]}))],2):t._e(),t._v(" "),t.showBtn?n("div",{staticClass:"me-image-crop-btn",on:{click:t.confirmCrop}},[t._t("confirm",(function(){return[n("span",{staticClass:"me-icon me-icon-sure",style:{fontSize:t.buttonSize+"px",color:"#45C189"},attrs:{alt:""}})]}))],2):t._e()])])})).exports;t.install=function(e){e.component(t.name,t)};const e=t})(),module.exports=r})();