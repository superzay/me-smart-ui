(()=>{var t={5581:(t,e,r)=>{var n=r(9907),i=r(6859);t.exports=function(t){if(n(t))return t;throw TypeError(i(t)+" is not a function")}},7957:(t,e,r)=>{var n=r(5846),i=r(6859);t.exports=function(t){if(n(t))return t;throw TypeError(i(t)+" is not a constructor")}},2838:(t,e,r)=>{var n=r(9907);t.exports=function(t){if("object"==typeof t||n(t))return t;throw TypeError("Can't set "+String(t)+" as a prototype")}},2338:(t,e,r)=>{var n=r(2712),i=r(6867),o=r(795),a=n("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(t){s[a][t]=!0}},3578:t=>{t.exports=function(t,e,r){if(t instanceof e)return t;throw TypeError("Incorrect "+(r?r+" ":"")+"invocation")}},4808:(t,e,r)=>{var n=r(3675);t.exports=function(t){if(n(t))return t;throw TypeError(String(t)+" is not an object")}},5775:(t,e,r)=>{var n=r(1177),i=r(9134),o=r(1921),a=function(t){return function(e,r,a){var s,c=n(e),u=i(c.length),l=o(a,u);if(t&&r!=r){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===r)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},5733:(t,e,r)=>{var n=r(2712)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},t(o)}catch(t){}return r}},32:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},581:(t,e,r)=>{var n=r(486),i=r(9907),o=r(32),a=r(2712)("toStringTag"),s="Arguments"==o(function(){return arguments}());t.exports=n?o:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),a))?r:s?o(e):"Object"==(n=o(e))&&i(e.callee)?"Arguments":n}},747:(t,e,r)=>{"use strict";var n=r(5581),i=r(4808);t.exports=function(){for(var t,e=i(this),r=n(e.delete),o=!0,a=0,s=arguments.length;a<s;a++)t=r.call(e,arguments[a]),o=o&&t;return!!o}},8062:(t,e,r)=>{var n=r(8298),i=r(2694),o=r(2963),a=r(795);t.exports=function(t,e){for(var r=i(e),s=a.f,c=o.f,u=0;u<r.length;u++){var l=r[u];n(t,l)||s(t,l,c(e,l))}}},5597:(t,e,r)=>{var n=r(9891);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},4749:(t,e,r)=>{"use strict";var n=r(2992).IteratorPrototype,i=r(6867),o=r(6776),a=r(5938),s=r(6274),c=function(){return this};t.exports=function(t,e,r){var u=e+" Iterator";return t.prototype=i(n,{next:o(1,r)}),a(t,u,!1,!0),s[u]=c,t}},4662:(t,e,r)=>{var n=r(9043),i=r(795),o=r(6776);t.exports=n?function(t,e,r){return i.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},6776:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},9139:(t,e,r)=>{"use strict";var n=r(8914),i=r(4040),o=r(1573),a=r(9907),s=r(4749),c=r(4803),u=r(6720),l=r(5938),h=r(4662),v=r(4913),f=r(2712),p=r(6274),d=r(2992),m=o.PROPER,g=o.CONFIGURABLE,y=d.IteratorPrototype,x=d.BUGGY_SAFARI_ITERATORS,w=f("iterator"),E="keys",S="values",b="entries",T=function(){return this};t.exports=function(t,e,r,o,f,d,L){s(r,e,o);var I,O,A,R=function(t){if(t===f&&C)return C;if(!x&&t in P)return P[t];switch(t){case E:case S:case b:return function(){return new r(this,t)}}return function(){return new r(this)}},_=e+" Iterator",j=!1,P=t.prototype,M=P[w]||P["@@iterator"]||f&&P[f],C=!x&&M||R(f),F="Array"==e&&P.entries||M;if(F&&(I=c(F.call(new t)))!==Object.prototype&&I.next&&(i||c(I)===y||(u?u(I,y):a(I[w])||v(I,w,T)),l(I,_,!0,!0),i&&(p[_]=T)),m&&f==S&&M&&M.name!==S&&(!i&&g?h(P,"name",S):(j=!0,C=function(){return M.call(this)})),f)if(O={values:R(S),keys:d?C:R(E),entries:R(b)},L)for(A in O)(x||j||!(A in P))&&v(P,A,O[A]);else n({target:e,proto:!0,forced:x||j},O);return i&&!L||P[w]===C||v(P,w,C,{name:f}),p[e]=C,O}},9043:(t,e,r)=>{var n=r(9891);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},9523:(t,e,r)=>{var n=r(742),i=r(3675),o=n.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},2519:t=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},9773:(t,e,r)=>{var n=r(9523)("span").classList,i=n&&n.constructor&&n.constructor.prototype;t.exports=i===Object.prototype?void 0:i},8058:t=>{t.exports="object"==typeof window},5281:(t,e,r)=>{var n=r(4498),i=r(742);t.exports=/ipad|iphone|ipod/i.test(n)&&void 0!==i.Pebble},1149:(t,e,r)=>{var n=r(4498);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},650:(t,e,r)=>{var n=r(32),i=r(742);t.exports="process"==n(i.process)},577:(t,e,r)=>{var n=r(4498);t.exports=/web0s(?!.*chrome)/i.test(n)},4498:(t,e,r)=>{var n=r(1373);t.exports=n("navigator","userAgent")||""},8687:(t,e,r)=>{var n,i,o=r(742),a=r(4498),s=o.process,c=o.Deno,u=s&&s.versions||c&&c.version,l=u&&u.v8;l?i=(n=l.split("."))[0]<4?1:n[0]+n[1]:a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(i=n[1]),t.exports=i&&+i},8054:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8914:(t,e,r)=>{var n=r(742),i=r(2963).f,o=r(4662),a=r(4913),s=r(3125),c=r(8062),u=r(6693);t.exports=function(t,e){var r,l,h,v,f,p=t.target,d=t.global,m=t.stat;if(r=d?n:m?n[p]||s(p,{}):(n[p]||{}).prototype)for(l in e){if(v=e[l],h=t.noTargetGet?(f=i(r,l))&&f.value:r[l],!u(d?l:p+(m?".":"#")+l,t.forced)&&void 0!==h){if(typeof v==typeof h)continue;c(v,h)}(t.sham||h&&h.sham)&&o(v,"sham",!0),a(r,l,v,t)}}},9891:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},8860:(t,e,r)=>{var n=r(5581);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},1573:(t,e,r)=>{var n=r(9043),i=r(8298),o=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=i(o,"name"),c=s&&"something"===function(){}.name,u=s&&(!n||n&&a(o,"name").configurable);t.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},1373:(t,e,r)=>{var n=r(742),i=r(9907),o=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(n[t]):n[t]&&n[t][e]}},8414:(t,e,r)=>{var n=r(581),i=r(5672),o=r(6274),a=r(2712)("iterator");t.exports=function(t){if(null!=t)return i(t,a)||i(t,"@@iterator")||o[n(t)]}},5586:(t,e,r)=>{var n=r(5581),i=r(4808),o=r(8414);t.exports=function(t,e){var r=arguments.length<2?o(t):e;if(n(r))return i(r.call(t));throw TypeError(String(t)+" is not iterable")}},2293:t=>{t.exports=function(t){return Map.prototype.entries.call(t)}},5672:(t,e,r)=>{var n=r(5581);t.exports=function(t,e){var r=t[e];return null==r?void 0:n(r)}},742:(t,e,r)=>{var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},8298:(t,e,r)=>{var n=r(386),i={}.hasOwnProperty;t.exports=Object.hasOwn||function(t,e){return i.call(n(t),e)}},6459:t=>{t.exports={}},4128:(t,e,r)=>{var n=r(742);t.exports=function(t,e){var r=n.console;r&&r.error&&(1===arguments.length?r.error(t):r.error(t,e))}},5786:(t,e,r)=>{var n=r(1373);t.exports=n("document","documentElement")},9030:(t,e,r)=>{var n=r(9043),i=r(9891),o=r(9523);t.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},4139:(t,e,r)=>{var n=r(9891),i=r(32),o="".split;t.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},6430:(t,e,r)=>{var n=r(9907),i=r(6584),o=Function.toString;n(i.inspectSource)||(i.inspectSource=function(t){return o.call(t)}),t.exports=i.inspectSource},1026:(t,e,r)=>{var n,i,o,a=r(6059),s=r(742),c=r(3675),u=r(4662),l=r(8298),h=r(6584),v=r(972),f=r(6459),p="Object already initialized",d=s.WeakMap;if(a||h.state){var m=h.state||(h.state=new d),g=m.get,y=m.has,x=m.set;n=function(t,e){if(y.call(m,t))throw new TypeError(p);return e.facade=t,x.call(m,t,e),e},i=function(t){return g.call(m,t)||{}},o=function(t){return y.call(m,t)}}else{var w=v("state");f[w]=!0,n=function(t,e){if(l(t,w))throw new TypeError(p);return e.facade=t,u(t,w,e),e},i=function(t){return l(t,w)?t[w]:{}},o=function(t){return l(t,w)}}t.exports={set:n,get:i,has:o,enforce:function(t){return o(t)?i(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!c(e)||(r=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}}},6238:(t,e,r)=>{var n=r(2712),i=r(6274),o=n("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},9907:t=>{t.exports=function(t){return"function"==typeof t}},5846:(t,e,r)=>{var n=r(9891),i=r(9907),o=r(581),a=r(1373),s=r(6430),c=[],u=a("Reflect","construct"),l=/^\s*(?:class|function)\b/,h=l.exec,v=!l.exec((function(){})),f=function(t){if(!i(t))return!1;try{return u(Object,c,t),!0}catch(t){return!1}};t.exports=!u||n((function(){var t;return f(f.call)||!f(Object)||!f((function(){t=!0}))||t}))?function(t){if(!i(t))return!1;switch(o(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return v||!!h.call(l,s(t))}:f},6693:(t,e,r)=>{var n=r(9891),i=r(9907),o=/#|\.prototype\./,a=function(t,e){var r=c[s(t)];return r==l||r!=u&&(i(e)?n(e):!!e)},s=a.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",l=a.POLYFILL="P";t.exports=a},3675:(t,e,r)=>{var n=r(9907);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},4040:t=>{t.exports=!1},5338:(t,e,r)=>{var n=r(9907),i=r(1373),o=r(6206);t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return n(e)&&Object(t)instanceof e}},6119:(t,e,r)=>{var n=r(4808),i=r(6238),o=r(9134),a=r(8860),s=r(5586),c=r(8414),u=r(5075),l=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,r){var h,v,f,p,d,m,g,y=r&&r.that,x=!(!r||!r.AS_ENTRIES),w=!(!r||!r.IS_ITERATOR),E=!(!r||!r.INTERRUPTED),S=a(e,y,1+x+E),b=function(t){return h&&u(h,"normal",t),new l(!0,t)},T=function(t){return x?(n(t),E?S(t[0],t[1],b):S(t[0],t[1])):E?S(t,b):S(t)};if(w)h=t;else{if(!(v=c(t)))throw TypeError(String(t)+" is not iterable");if(i(v)){for(f=0,p=o(t.length);p>f;f++)if((d=T(t[f]))&&d instanceof l)return d;return new l(!1)}h=s(t,v)}for(m=h.next;!(g=m.call(h)).done;){try{d=T(g.value)}catch(t){u(h,"throw",t)}if("object"==typeof d&&d&&d instanceof l)return d}return new l(!1)}},5075:(t,e,r)=>{var n=r(4808),i=r(5672);t.exports=function(t,e,r){var o,a;n(t);try{if(!(o=i(t,"return"))){if("throw"===e)throw r;return r}o=o.call(t)}catch(t){a=!0,o=t}if("throw"===e)throw r;if(a)throw o;return n(o),r}},2992:(t,e,r)=>{"use strict";var n,i,o,a=r(9891),s=r(9907),c=r(6867),u=r(4803),l=r(4913),h=r(2712),v=r(4040),f=h("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(i=u(u(o)))!==Object.prototype&&(n=i):p=!0),null==n||a((function(){var t={};return n[f].call(t)!==t}))?n={}:v&&(n=c(n)),s(n[f])||l(n,f,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:p}},6274:t=>{t.exports={}},2938:(t,e,r)=>{var n,i,o,a,s,c,u,l,h=r(742),v=r(2963).f,f=r(8518).set,p=r(1149),d=r(5281),m=r(577),g=r(650),y=h.MutationObserver||h.WebKitMutationObserver,x=h.document,w=h.process,E=h.Promise,S=v(h,"queueMicrotask"),b=S&&S.value;b||(n=function(){var t,e;for(g&&(t=w.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?a():o=void 0,t}}o=void 0,t&&t.enter()},p||g||m||!y||!x?!d&&E&&E.resolve?((u=E.resolve(void 0)).constructor=E,l=u.then,a=function(){l.call(u,n)}):a=g?function(){w.nextTick(n)}:function(){f.call(h,n)}:(s=!0,c=x.createTextNode(""),new y(n).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),t.exports=b||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},8073:(t,e,r)=>{var n=r(742);t.exports=n.Promise},2633:(t,e,r)=>{var n=r(8687),i=r(9891);t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},6059:(t,e,r)=>{var n=r(742),i=r(9907),o=r(6430),a=n.WeakMap;t.exports=i(a)&&/native code/.test(o(a))},2095:(t,e,r)=>{"use strict";var n=r(5581),i=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n})),this.resolve=n(e),this.reject=n(r)};t.exports.f=function(t){return new i(t)}},6867:(t,e,r)=>{var n,i=r(4808),o=r(41),a=r(8054),s=r(6459),c=r(5786),u=r(9523),l=r(972)("IE_PROTO"),h=function(){},v=function(t){return"<script>"+t+"<\/script>"},f=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},p=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e;p="undefined"!=typeof document?document.domain&&n?f(n):((e=u("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(v("document.F=Object")),t.close(),t.F):f(n);for(var r=a.length;r--;)delete p.prototype[a[r]];return p()};s[l]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(h.prototype=i(t),r=new h,h.prototype=null,r[l]=t):r=p(),void 0===e?r:o(r,e)}},41:(t,e,r)=>{var n=r(9043),i=r(795),o=r(4808),a=r(5946);t.exports=n?Object.defineProperties:function(t,e){o(t);for(var r,n=a(e),s=n.length,c=0;s>c;)i.f(t,r=n[c++],e[r]);return t}},795:(t,e,r)=>{var n=r(9043),i=r(9030),o=r(4808),a=r(1697),s=Object.defineProperty;e.f=n?s:function(t,e,r){if(o(t),e=a(e),o(r),i)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},2963:(t,e,r)=>{var n=r(9043),i=r(8492),o=r(6776),a=r(1177),s=r(1697),c=r(8298),u=r(9030),l=Object.getOwnPropertyDescriptor;e.f=n?l:function(t,e){if(t=a(t),e=s(e),u)try{return l(t,e)}catch(t){}if(c(t,e))return o(!i.f.call(t,e),t[e])}},3638:(t,e,r)=>{var n=r(6306),i=r(8054).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},7801:(t,e)=>{e.f=Object.getOwnPropertySymbols},4803:(t,e,r)=>{var n=r(8298),i=r(9907),o=r(386),a=r(972),s=r(5597),c=a("IE_PROTO"),u=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){var e=o(t);if(n(e,c))return e[c];var r=e.constructor;return i(r)&&e instanceof r?r.prototype:e instanceof Object?u:null}},6306:(t,e,r)=>{var n=r(8298),i=r(1177),o=r(5775).indexOf,a=r(6459);t.exports=function(t,e){var r,s=i(t),c=0,u=[];for(r in s)!n(a,r)&&n(s,r)&&u.push(r);for(;e.length>c;)n(s,r=e[c++])&&(~o(u,r)||u.push(r));return u}},5946:(t,e,r)=>{var n=r(6306),i=r(8054);t.exports=Object.keys||function(t){return n(t,i)}},8492:(t,e)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);e.f=i?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},6720:(t,e,r)=>{var n=r(4808),i=r(2838);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,o){return n(r),i(o),e?t.call(r,o):r.__proto__=o,r}}():void 0)},6751:(t,e,r)=>{var n=r(9907),i=r(3675);t.exports=function(t,e){var r,o;if("string"===e&&n(r=t.toString)&&!i(o=r.call(t)))return o;if(n(r=t.valueOf)&&!i(o=r.call(t)))return o;if("string"!==e&&n(r=t.toString)&&!i(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},2694:(t,e,r)=>{var n=r(1373),i=r(3638),o=r(7801),a=r(4808);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(a(t)),r=o.f;return r?e.concat(r(t)):e}},9068:t=>{t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},2935:(t,e,r)=>{var n=r(4808),i=r(3675),o=r(2095);t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},3411:(t,e,r)=>{var n=r(4913);t.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},4913:(t,e,r)=>{var n=r(742),i=r(9907),o=r(8298),a=r(4662),s=r(3125),c=r(6430),u=r(1026),l=r(1573).CONFIGURABLE,h=u.get,v=u.enforce,f=String(String).split("String");(t.exports=function(t,e,r,c){var u,h=!!c&&!!c.unsafe,p=!!c&&!!c.enumerable,d=!!c&&!!c.noTargetGet,m=c&&void 0!==c.name?c.name:e;i(r)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(r,"name")||l&&r.name!==m)&&a(r,"name",m),(u=v(r)).source||(u.source=f.join("string"==typeof m?m:""))),t!==n?(h?!d&&t[e]&&(p=!0):delete t[e],p?t[e]=r:a(t,e,r)):p?t[e]=r:s(e,r)})(Function.prototype,"toString",(function(){return i(this)&&h(this).source||c(this)}))},7295:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},5947:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},3125:(t,e,r)=>{var n=r(742);t.exports=function(t,e){try{Object.defineProperty(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},3974:(t,e,r)=>{"use strict";var n=r(1373),i=r(795),o=r(2712),a=r(9043),s=o("species");t.exports=function(t){var e=n(t),r=i.f;a&&e&&!e[s]&&r(e,s,{configurable:!0,get:function(){return this}})}},5938:(t,e,r)=>{var n=r(795).f,i=r(8298),o=r(2712)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},972:(t,e,r)=>{var n=r(8336),i=r(4560),o=n("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},6584:(t,e,r)=>{var n=r(742),i=r(3125),o="__core-js_shared__",a=n[o]||i(o,{});t.exports=a},8336:(t,e,r)=>{var n=r(4040),i=r(6584);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.18.1",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},9253:(t,e,r)=>{var n=r(4808),i=r(7957),o=r(2712)("species");t.exports=function(t,e){var r,a=n(t).constructor;return void 0===a||null==(r=n(a)[o])?e:i(r)}},8518:(t,e,r)=>{var n,i,o,a,s=r(742),c=r(9907),u=r(9891),l=r(8860),h=r(5786),v=r(9523),f=r(1149),p=r(650),d=s.setImmediate,m=s.clearImmediate,g=s.process,y=s.MessageChannel,x=s.Dispatch,w=0,E={};try{n=s.location}catch(t){}var S=function(t){if(E.hasOwnProperty(t)){var e=E[t];delete E[t],e()}},b=function(t){return function(){S(t)}},T=function(t){S(t.data)},L=function(t){s.postMessage(String(t),n.protocol+"//"+n.host)};d&&m||(d=function(t){for(var e=[],r=arguments.length,n=1;r>n;)e.push(arguments[n++]);return E[++w]=function(){(c(t)?t:Function(t)).apply(void 0,e)},i(w),w},m=function(t){delete E[t]},p?i=function(t){g.nextTick(b(t))}:x&&x.now?i=function(t){x.now(b(t))}:y&&!f?(a=(o=new y).port2,o.port1.onmessage=T,i=l(a.postMessage,a,1)):s.addEventListener&&c(s.postMessage)&&!s.importScripts&&n&&"file:"!==n.protocol&&!u(L)?(i=L,s.addEventListener("message",T,!1)):i="onreadystatechange"in v("script")?function(t){h.appendChild(v("script")).onreadystatechange=function(){h.removeChild(this),S(t)}}:function(t){setTimeout(b(t),0)}),t.exports={set:d,clear:m}},1921:(t,e,r)=>{var n=r(9349),i=Math.max,o=Math.min;t.exports=function(t,e){var r=n(t);return r<0?i(r+e,0):o(r,e)}},1177:(t,e,r)=>{var n=r(4139),i=r(7295);t.exports=function(t){return n(i(t))}},9349:t=>{var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},9134:(t,e,r)=>{var n=r(9349),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},386:(t,e,r)=>{var n=r(7295);t.exports=function(t){return Object(n(t))}},1167:(t,e,r)=>{var n=r(3675),i=r(5338),o=r(5672),a=r(6751),s=r(2712)("toPrimitive");t.exports=function(t,e){if(!n(t)||i(t))return t;var r,c=o(t,s);if(c){if(void 0===e&&(e="default"),r=c.call(t,e),!n(r)||i(r))return r;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},1697:(t,e,r)=>{var n=r(1167),i=r(5338);t.exports=function(t){var e=n(t,"string");return i(e)?e:String(e)}},486:(t,e,r)=>{var n={};n[r(2712)("toStringTag")]="z",t.exports="[object z]"===String(n)},6859:t=>{t.exports=function(t){try{return String(t)}catch(t){return"Object"}}},4560:t=>{var e=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+r).toString(36)}},6206:(t,e,r)=>{var n=r(2633);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},2712:(t,e,r)=>{var n=r(742),i=r(8336),o=r(8298),a=r(4560),s=r(2633),c=r(6206),u=i("wks"),l=n.Symbol,h=c?l:l&&l.withoutSetter||a;t.exports=function(t){return o(u,t)&&(s||"string"==typeof u[t])||(s&&o(l,t)?u[t]=l[t]:u[t]=h("Symbol."+t)),u[t]}},4864:(t,e,r)=>{"use strict";var n=r(1177),i=r(2338),o=r(6274),a=r(1026),s=r(9139),c="Array Iterator",u=a.set,l=a.getterFor(c);t.exports=s(Array,"Array",(function(t,e){u(this,{type:c,target:n(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},5057:(t,e,r)=>{"use strict";var n,i,o,a,s=r(8914),c=r(4040),u=r(742),l=r(1373),h=r(8073),v=r(4913),f=r(3411),p=r(6720),d=r(5938),m=r(3974),g=r(5581),y=r(9907),x=r(3675),w=r(3578),E=r(6430),S=r(6119),b=r(5733),T=r(9253),L=r(8518).set,I=r(2938),O=r(2935),A=r(4128),R=r(2095),_=r(9068),j=r(1026),P=r(6693),M=r(2712),C=r(8058),F=r(650),N=r(8687),W=M("species"),k="Promise",z=j.get,H=j.set,D=j.getterFor(k),G=h&&h.prototype,U=h,q=G,B=u.TypeError,Y=u.document,X=u.process,$=R.f,V=$,K=!!(Y&&Y.createEvent&&u.dispatchEvent),J=y(u.PromiseRejectionEvent),Q="unhandledrejection",Z=!1,tt=P(k,(function(){var t=E(U),e=t!==String(U);if(!e&&66===N)return!0;if(c&&!q.finally)return!0;if(N>=51&&/native code/.test(t))return!1;var r=new U((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};return(r.constructor={})[W]=n,!(Z=r.then((function(){}))instanceof n)||!e&&C&&!J})),et=tt||!b((function(t){U.all(t).catch((function(){}))})),rt=function(t){var e;return!(!x(t)||!y(e=t.then))&&e},nt=function(t,e){if(!t.notified){t.notified=!0;var r=t.reactions;I((function(){for(var n=t.value,i=1==t.state,o=0;r.length>o;){var a,s,c,u=r[o++],l=i?u.ok:u.fail,h=u.resolve,v=u.reject,f=u.domain;try{l?(i||(2===t.rejection&&st(t),t.rejection=1),!0===l?a=n:(f&&f.enter(),a=l(n),f&&(f.exit(),c=!0)),a===u.promise?v(B("Promise-chain cycle")):(s=rt(a))?s.call(a,h,v):h(a)):v(n)}catch(t){f&&!c&&f.exit(),v(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&ot(t)}))}},it=function(t,e,r){var n,i;K?((n=Y.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),u.dispatchEvent(n)):n={promise:e,reason:r},!J&&(i=u["on"+t])?i(n):t===Q&&A("Unhandled promise rejection",r)},ot=function(t){L.call(u,(function(){var e,r=t.facade,n=t.value;if(at(t)&&(e=_((function(){F?X.emit("unhandledRejection",n,r):it(Q,r,n)})),t.rejection=F||at(t)?2:1,e.error))throw e.value}))},at=function(t){return 1!==t.rejection&&!t.parent},st=function(t){L.call(u,(function(){var e=t.facade;F?X.emit("rejectionHandled",e):it("rejectionhandled",e,t.value)}))},ct=function(t,e,r){return function(n){t(e,n,r)}},ut=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,nt(t,!0))},lt=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw B("Promise can't be resolved itself");var n=rt(e);n?I((function(){var r={done:!1};try{n.call(e,ct(lt,r,t),ct(ut,r,t))}catch(e){ut(r,e,t)}})):(t.value=e,t.state=1,nt(t,!1))}catch(e){ut({done:!1},e,t)}}};if(tt&&(q=(U=function(t){w(this,U,k),g(t),n.call(this);var e=z(this);try{t(ct(lt,e),ct(ut,e))}catch(t){ut(e,t)}}).prototype,(n=function(t){H(this,{type:k,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=f(q,{then:function(t,e){var r=D(this),n=$(T(this,U));return n.ok=!y(t)||t,n.fail=y(e)&&e,n.domain=F?X.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&nt(r,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new n,e=z(t);this.promise=t,this.resolve=ct(lt,e),this.reject=ct(ut,e)},R.f=$=function(t){return t===U||t===o?new i(t):V(t)},!c&&y(h)&&G!==Object.prototype)){a=G.then,Z||(v(G,"then",(function(t,e){var r=this;return new U((function(t,e){a.call(r,t,e)})).then(t,e)}),{unsafe:!0}),v(G,"catch",q.catch,{unsafe:!0}));try{delete G.constructor}catch(t){}p&&p(G,q)}s({global:!0,wrap:!0,forced:tt},{Promise:U}),d(U,k,!1,!0),m(k),o=l(k),s({target:k,stat:!0,forced:tt},{reject:function(t){var e=$(this);return e.reject.call(void 0,t),e.promise}}),s({target:k,stat:!0,forced:c||tt},{resolve:function(t){return O(c&&this===o?U:this,t)}}),s({target:k,stat:!0,forced:et},{all:function(t){var e=this,r=$(e),n=r.resolve,i=r.reject,o=_((function(){var r=g(e.resolve),o=[],a=0,s=1;S(t,(function(t){var c=a++,u=!1;o.push(void 0),s++,r.call(e,t).then((function(t){u||(u=!0,o[c]=t,--s||n(o))}),i)})),--s||n(o)}));return o.error&&i(o.value),r.promise},race:function(t){var e=this,r=$(e),n=r.reject,i=_((function(){var i=g(e.resolve);S(t,(function(t){i.call(e,t).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}})},5562:(t,e,r)=>{"use strict";var n=r(8914),i=r(4040),o=r(747);n({target:"Map",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},6825:(t,e,r)=>{"use strict";var n=r(8914),i=r(4040),o=r(4808),a=r(8860),s=r(2293),c=r(6119);n({target:"Map",proto:!0,real:!0,forced:i},{every:function(t){var e=o(this),r=s(e),n=a(t,arguments.length>1?arguments[1]:void 0,3);return!c(r,(function(t,r,i){if(!n(r,t,e))return i()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},757:(t,e,r)=>{"use strict";var n=r(8914),i=r(4040),o=r(1373),a=r(5581),s=r(4808),c=r(8860),u=r(9253),l=r(2293),h=r(6119);n({target:"Map",proto:!0,real:!0,forced:i},{filter:function(t){var e=s(this),r=l(e),n=c(t,arguments.length>1?arguments[1]:void 0,3),i=new(u(e,o("Map"))),v=a(i.set);return h(r,(function(t,r){n(r,t,e)&&v.call(i,t,r)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}})},1796:(t,e,r)=>{"use strict";var n=r(8914),i=r(4040),o=r(4808),a=r(8860),s=r(2293),c=r(6119);n({target:"Map",proto:!0,real:!0,forced:i},{findKey:function(t){var e=o(this),r=s(e),n=a(t,arguments.length>1?arguments[1]:void 0,3);return c(r,(function(t,r,i){if(n(r,t,e))return i(t)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},3722:(t,e,r)=>{"use strict";var n=r(8914),i=r(4040),o=r(4808),a=r(8860),s=r(2293),c=r(6119);n({target:"Map",proto:!0,real:!0,forced:i},{find:function(t){var e=o(this),r=s(e),n=a(t,arguments.length>1?arguments[1]:void 0,3);return c(r,(function(t,r,i){if(n(r,t,e))return i(r)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},9535:(t,e,r)=>{"use strict";var n=r(8914),i=r(4040),o=r(4808),a=r(2293),s=r(5947),c=r(6119);n({target:"Map",proto:!0,real:!0,forced:i},{includes:function(t){return c(a(o(this)),(function(e,r,n){if(s(r,t))return n()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},1122:(t,e,r)=>{"use strict";var n=r(8914),i=r(4040),o=r(4808),a=r(2293),s=r(6119);n({target:"Map",proto:!0,real:!0,forced:i},{keyOf:function(t){return s(a(o(this)),(function(e,r,n){if(r===t)return n(e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},8209:(t,e,r)=>{"use strict";var n=r(8914),i=r(4040),o=r(1373),a=r(5581),s=r(4808),c=r(8860),u=r(9253),l=r(2293),h=r(6119);n({target:"Map",proto:!0,real:!0,forced:i},{mapKeys:function(t){var e=s(this),r=l(e),n=c(t,arguments.length>1?arguments[1]:void 0,3),i=new(u(e,o("Map"))),v=a(i.set);return h(r,(function(t,r){v.call(i,n(r,t,e),r)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}})},9607:(t,e,r)=>{"use strict";var n=r(8914),i=r(4040),o=r(1373),a=r(5581),s=r(4808),c=r(8860),u=r(9253),l=r(2293),h=r(6119);n({target:"Map",proto:!0,real:!0,forced:i},{mapValues:function(t){var e=s(this),r=l(e),n=c(t,arguments.length>1?arguments[1]:void 0,3),i=new(u(e,o("Map"))),v=a(i.set);return h(r,(function(t,r){v.call(i,t,n(r,t,e))}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}})},7565:(t,e,r)=>{"use strict";var n=r(8914),i=r(4040),o=r(5581),a=r(4808),s=r(6119);n({target:"Map",proto:!0,real:!0,forced:i},{merge:function(t){for(var e=a(this),r=o(e.set),n=arguments.length,i=0;i<n;)s(arguments[i++],r,{that:e,AS_ENTRIES:!0});return e}})},1792:(t,e,r)=>{"use strict";var n=r(8914),i=r(4040),o=r(4808),a=r(5581),s=r(2293),c=r(6119);n({target:"Map",proto:!0,real:!0,forced:i},{reduce:function(t){var e=o(this),r=s(e),n=arguments.length<2,i=n?void 0:arguments[1];if(a(t),c(r,(function(r,o){n?(n=!1,i=o):i=t(i,o,r,e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),n)throw TypeError("Reduce of empty map with no initial value");return i}})},6811:(t,e,r)=>{"use strict";var n=r(8914),i=r(4040),o=r(4808),a=r(8860),s=r(2293),c=r(6119);n({target:"Map",proto:!0,real:!0,forced:i},{some:function(t){var e=o(this),r=s(e),n=a(t,arguments.length>1?arguments[1]:void 0,3);return c(r,(function(t,r,i){if(n(r,t,e))return i()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},7861:(t,e,r)=>{"use strict";var n=r(8914),i=r(4040),o=r(4808),a=r(5581);n({target:"Map",proto:!0,real:!0,forced:i},{update:function(t,e){var r=o(this),n=arguments.length;a(e);var i=r.has(t);if(!i&&n<3)throw TypeError("Updating absent value");var s=i?r.get(t):a(n>2?arguments[2]:void 0)(t,r);return r.set(t,e(s,t,r)),r}})},9214:(t,e,r)=>{var n=r(742),i=r(2519),o=r(9773),a=r(4864),s=r(4662),c=r(2712),u=c("iterator"),l=c("toStringTag"),h=a.values,v=function(t,e){if(t){if(t[u]!==h)try{s(t,u,h)}catch(e){t[u]=h}if(t[l]||s(t,l,e),i[e])for(var r in a)if(t[r]!==a[r])try{s(t,r,a[r])}catch(e){t[r]=a[r]}}};for(var f in i)v(n[f]&&n[f].prototype,f);v(o,"DOMTokenList")}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{default:()=>e}),r(5057),r(9214),r(5562),r(6825),r(757),r(3722),r(1796),r(9535),r(1122),r(8209),r(9607),r(7565),r(1792),r(6811),r(7861);const t=function(t,e,r,n,i,o,a,s){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=[],u._compiled=!0),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,c):[c]}return{exports:t,options:u}}({name:"me-image-crop",props:{imageSrc:{type:String,required:!0},showBtn:{type:Boolean,default:!0},outType:{type:String,default:"base64"}},data:()=>({browser:"",wt:null,canvas:null,ctx:null,canvasWidth:0,canvasHeight:0,cropFrameSize:0,buttonTop:0,buttonRight:0,buttonSize:30,waitingAni:{size:5,colors:["#e2e2e2","#a2a2a2","#a2a2a2"],timer:0,start:!1},img:null,imgNaturalWidth:0,imgNaturalHeight:0,scale:1,scaleRate:0,position:{x:0,y:0},rotateAngle:0,AnimationFrameId:""}),created(){this.wt=this.watchTouch(),this.wt.watch();try{window.addEventListener("touchmove",this.forbidPageScale,{passive:!1})}catch(t){window.addEventListener("touchmove",this.forbidPageScale)}if(this.is_pc()){let t="",e=window.navigator.userAgent.toLowerCase();e.indexOf("trident/7.0")>-1?t="ie":e.indexOf("opera")>-1?t="opera":e.indexOf("safari")>-1&&-1===e.indexOf("chrome")?t="safari":e.indexOf("chrome")>-1?t="chrome":e.indexOf("firefox")>-1&&(t="firefox"),this.browser=t}this.$nextTick((()=>{Promise.all([this.initCanvas(),this.imgLoad()]).then((()=>{this.scaleImg(),this.translateImg(),this.rotateImg()})),this.AnimationFrameId=window.requestAnimationFrame(this.draw)}))},watch:{showBtn(t,e){t&&this.$nextTick(this.rotateImg_pc)}},methods:{forbidPageScale(t){(t=t||window.event).preventDefault()},is_pc(){let t=["android","iphone","symbianOS","windows phone","ipad","ipod"],e=window.navigator.userAgent.toLowerCase(),r=!0;for(let n=0;n<t.length;n++)e.indexOf(t[n])>=0&&(r=!1);return r},watchTouch(){let t=new Map;const e=e=>{t.set(e.changedTouches[0].identifier,e.changedTouches[0])},r=e=>{Array.from(e.touches).map((e=>{t.has(e.identifier)&&t.set(e.identifier,e)}))},n=e=>{t.delete(e.changedTouches[0].identifier)},i=e=>{t.clear()};return{watch(){window.addEventListener("touchstart",e,!0),window.addEventListener("touchmove",r,!0),window.addEventListener("touchend",n,!0),window.addEventListener("touchcancel",i,!0)},dispose(){window.removeEventListener("touchstart",e),window.removeEventListener("touchmove",r),window.removeEventListener("touchend",n),window.removeEventListener("touchcancel",i)},touchMap:t}},initCanvas(){let t=window.getComputedStyle(this.$refs.meImageCrop,null).getPropertyValue("height"),e=window.getComputedStyle(this.$refs.meImageCrop,null).getPropertyValue("width");return this.canvasHeight=parseInt(t),this.canvasWidth=parseInt(e),this.canvas=this.$refs.meImageCrop.querySelector(".me-image-crop-canvas"),this.canvas.height=this.canvasHeight,this.canvas.width=this.canvasWidth,this.ctx=this.canvas.getContext("2d"),this.cropFrameSize=this.canvasWidth<this.canvasHeight?.7*this.canvasWidth:.7*this.canvasHeight,this.buttonTop=this.canvasHeight/30>30?30:this.canvasHeight/30<20?20:this.canvasHeight/30,this.buttonRight=((this.canvasWidth-this.cropFrameSize)/2-this.buttonSize)/2,this.buttonRight=this.buttonRight>30?30:this.buttonRight<10?10:this.buttonRight,this.position.x=this.canvasWidth/2,this.position.y=this.canvasHeight/2,Promise.resolve()},imgLoad(){return new Promise(((t,e)=>{this.img=document.createElement("img"),this.img.src=this.imageSrc,this.img.onload=()=>{this.imgNaturalWidth=this.img.naturalWidth,this.imgNaturalHeight=this.img.naturalHeight;let e=this.canvasWidth/this.imgNaturalWidth,r=this.canvasHeight/this.imgNaturalHeight;this.scale=e<r?e:r,t()}}))},drawCropFrame(){let t=[{x:0,y:0},{x:this.canvasWidth,y:0},{x:this.canvasWidth,y:this.canvasHeight},{x:0,y:this.canvasHeight}],e=[{x:parseInt(this.canvasWidth/2-this.cropFrameSize/2)+.5,y:parseInt(this.canvasHeight/2-this.cropFrameSize/2)+.5},{x:parseInt(this.canvasWidth/2+this.cropFrameSize/2)+.5,y:parseInt(this.canvasHeight/2-this.cropFrameSize/2)+.5},{x:parseInt(this.canvasWidth/2+this.cropFrameSize/2)+.5,y:parseInt(this.canvasHeight/2+this.cropFrameSize/2)+.5},{x:parseInt(this.canvasWidth/2-this.cropFrameSize/2)+.5,y:parseInt(this.canvasHeight/2+this.cropFrameSize/2)+.5}];this.ctx.save(),this.ctx.fillStyle="rgba(0,0,0,0.35)",this.ctx.beginPath(),this.ctx.moveTo(t[0].x,t[0].y),this.ctx.lineTo(e[0].x,e[0].y),this.ctx.lineTo(e[1].x,e[1].y),this.ctx.lineTo(e[2].x,e[2].y),this.ctx.lineTo(e[3].x,e[3].y),this.ctx.lineTo(e[0].x,e[0].y),this.ctx.lineTo(t[0].x,t[0].y),this.ctx.lineTo(t[3].x,t[3].y),this.ctx.lineTo(t[2].x,t[2].y),this.ctx.lineTo(t[1].x,t[1].y),this.ctx.fill(),this.ctx.restore(),this.ctx.save(),this.ctx.strokeStyle="#fff",this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(e[0].x,e[0].y),this.ctx.lineTo(e[1].x,e[1].y),this.ctx.lineTo(e[2].x,e[2].y),this.ctx.lineTo(e[3].x,e[3].y),this.ctx.closePath(),this.ctx.stroke(),this.ctx.restore()},scaleImg(){let t,e,r,n,i=!1;const o=o=>{if(!i)if(o=o||window.event,this.is_pc())i=!0;else{let o=[];if([...this.wt.touchMap.values()].map((t=>{t.target===this.$refs.meImageCrop.querySelector(".me-image-crop-canvas")&&o.push(t)})),2===o.length&&!1===i){i=!0,n=this.scale,e=o[0].identifier,r=o[1].identifier;let a=o[0].clientX,s=o[0].clientY,c=o[1].clientX,u=o[1].clientY;t=Math.sqrt((a-c)*(a-c)+(s-u)*(s-u))}}},a=o=>{if(this.is_pc()){let t=document.querySelector(".me-image-crop-canvas");!t||!t.contains(o.target)&&t!==o.target||this.scaleStart||(i=!0)}if(i)if(o=o||window.event,this.is_pc()){let t="";t="firefox"===this.browser?o.detail<0?"up":"down":o.wheelDelta>0?"up":"down",this.scale="up"===t?1.1*this.scale:.9*this.scale}else{let i,a;for(let t=0;t<o.touches.length;t++)o.touches[t].identifier===e&&(i=o.touches[t]),o.touches[t].identifier===r&&(a=o.touches[t]);if(!i||!a)return;let s=i.clientX,c=i.clientY,u=a.clientX,l=a.clientY,h=Math.sqrt((s-u)*(s-u)+(c-l)*(c-l));this.scale=n*(h/t)}},s=o=>{if(i)if(o=o||window.event,this.is_pc())i=!1,t=void 0,e=void 0,r=void 0,n=void 0;else{let a,s;for(let t=0;t<o.touches.length;t++)o.touches[t].identifier===e&&(a=o.touches[t]),o.touches[t].identifier===r&&(s=o.touches[t]);"touchcancel"!==o.type&&a&&s||(i=!1,t=void 0,e=void 0,r=void 0,n=void 0)}};this.canvas.addEventListener("mouseover",o),window.addEventListener("DOMMouseScroll",a),window.addEventListener("mousewheel",a),this.canvas.addEventListener("mouseout",s),this.canvas.addEventListener("touchmove",o),this.canvas.addEventListener("touchmove",a),document.addEventListener("touchend",s),document.addEventListener("touchcancel",s),this._disposeScale=()=>{this.canvas.removeEventListener("mouseenter",o),window.removeEventListener("DOMMouseScroll",a),window.removeEventListener("mousewheel",a),this.canvas.removeEventListener("mouseleave",s),this.canvas.removeEventListener("touchmove",o),this.canvas.removeEventListener("touchmove",a),document.removeEventListener("touchend",s),document.removeEventListener("touchcancel",s)}},translateImg(){let t,e=!1,r={x:0,y:0},n={x:0,y:0};const i=i=>{if(!e)if(i=i||window.event,this.is_pc())e=!0,n.x=this.position.x,n.y=this.position.y,r.x=i.clientX,r.y=i.clientY;else{let i=[],o=[...this.wt.touchMap.values()];o.map((t=>{t.target===this.$refs.meImageCrop.querySelector(".me-image-crop-canvas")&&i.push(t)})),1===i.length&&1===o.length&&!1===e&&(e=!0,n.x=this.position.x,n.y=this.position.y,t=i[0].identifier,r.x=i[0].clientX,r.y=i[0].clientY)}},o=i=>{if(e)if(i=i||window.event,this.is_pc()){let t=i.clientX-r.x,e=i.clientY-r.y;this.position.x=n.x+t,this.position.y=n.y+e}else{let e;for(let r=0;r<i.touches.length;r++)i.touches[r].identifier===t&&(e=i.touches[r]);if(!e)return;let o=e.clientX-r.x,a=e.clientY-r.y;this.position.x=n.x+o,this.position.y=n.y+a}},a=i=>{e&&(e=!1,n.x=0,n.y=0,r.x=0,r.y=0,t=void 0)};this.canvas.addEventListener("mousemove",o),this.canvas.addEventListener("mousedown",i),document.addEventListener("mouseup",a),document.addEventListener("mousecancel",a),this.canvas.addEventListener("touchmove",i),this.canvas.addEventListener("touchmove",o),document.addEventListener("touchend",a),document.addEventListener("touchcancel",a),document.addEventListener("touchstart",a),this._disposeTranslate=()=>{this.canvas.removeEventListener("mousemove",o),this.canvas.removeEventListener("click",i),document.removeEventListener("mouseup",a),document.removeEventListener("mousecancel",a),this.canvas.removeEventListener("touchmove",i),this.canvas.removeEventListener("touchmove",o),document.removeEventListener("touchend",a),document.removeEventListener("touchcancel",a),document.removeEventListener("touchstart",a)}},rotateImg(){this.is_pc()&&this.showBtn?this.rotateImg_pc():this.rotateImg_mobile()},rotateImg_pc(){let t=this.$refs.meImageCrop.querySelector(".me-image-crop-btn-rotate");if(!t)return;let e=!0,r=!0;t.addEventListener("click",(()=>{r?this.rotateAngle++:this.rotateAngle--}));let n=function(t){if(!(t instanceof HTMLElement||t===window))return;let e,r,n={},i=0;function o(t){i=1,window.removeEventListener("click",o),window.removeEventListener("mouseup",o),window.removeEventListener("mousecancel",o),e&&clearTimeout(e)}function a(t){window.removeEventListener("click",a),window.removeEventListener("mouseup",a),window.removeEventListener("mousecancel",a),r&&clearInterval(r),n.longtabover&&n.longtabover.map((t=>{t()}))}return t.addEventListener("mousedown",(()=>{i=0,window.addEventListener("click",o),window.addEventListener("mouseup",o),window.addEventListener("mousecancel",o),e=setTimeout((()=>{window.removeEventListener("click",o),window.removeEventListener("mouseup",o),window.removeEventListener("mousecancel",o),0===i&&(i=2,n.longtabstart&&n.longtabstart.map((t=>{t()})),r=setInterval((()=>{n.longtabing&&n.longtabing.map((t=>{t()}))}),50),window.addEventListener("click",a),window.addEventListener("mouseup",a),window.addEventListener("mousecancel",a))}),500)})),{addEventListener:function(t,e){n[t]?n[t].push(e):n[t]=[e]}}}(t);n.addEventListener("longtabstart",(()=>{e?e=!1:r=!r})),n.addEventListener("longtabing",(()=>{this.rotateAngle+=r?3:-3}))},rotateImg_mobile(){let t,e,r=!1,n=null,i={x:null,y:null};const o=o=>{if(r)return;o=o||window.event;let a=[];[...this.wt.touchMap.values()].map((t=>{t.target===this.$refs.meImageCrop.querySelector(".me-image-crop-canvas")&&a.push(t)})),2===a.length&&!1===r&&(r=!0,n=this.rotateAngle,t=a[0].identifier,e=a[1].identifier,i.x=a[1].clientX-a[0].clientX,i.y=a[1].clientY-a[0].clientY)},a=o=>{if(!r)return;let a,s;o=o||window.event;for(let r=0;r<o.touches.length;r++)o.touches[r].identifier===t&&(a=o.touches[r]),o.touches[r].identifier===e&&(s=o.touches[r]);if(!a||!s)return;let c={x:null,y:null};c.x=s.clientX-a.clientX,c.y=s.clientY-a.clientY;let u=Math.acos((i.x*c.x+i.y*c.y)/(Math.sqrt(i.x*i.x+i.y*i.y)*Math.sqrt(c.x*c.x+c.y*c.y)));if(u=180/Math.PI*u,Number.isNaN(u))return;let l=i.x*c.y-i.y*c.x;this.rotateAngle=l>=0?n+u:n-u},s=o=>{if(!r)return;let a,s;o=o||window.event;for(let r=0;r<o.touches.length;r++)o.touches[r].identifier===t&&(a=o.touches[r]),o.touches[r].identifier===e&&(s=o.touches[r]);"touchcancel"!==o.type&&a&&s||(r=!1,i.x=null,i.y=null,t=null,e=null,n=null)};this.canvas.addEventListener("touchstart",o),this.canvas.addEventListener("touchmove",a),document.addEventListener("touchend",s),document.addEventListener("touchcancel",s),this._disposeRotate=()=>{this.canvas.removeEventListener("touchstart",o),this.canvas.removeEventListener("touchmove",a),document.removeEventListener("touchend",s),document.removeEventListener("touchcancel",s)}},cancelCrop(){this.$emit("cancel-crop-image")},confirmCrop(){if(this.waitingAni.start)return;this.startWaitingAni();let t={x:parseInt(this.canvasWidth/2-(this.cropFrameSize-2)/2)+.5,y:parseInt(this.canvasHeight/2-(this.cropFrameSize-2)/2)+.5},e=this.ctx.getImageData(t.x,t.y,this.cropFrameSize-2,this.cropFrameSize-2),r=document.createElement("canvas");r.width=this.cropFrameSize,r.height=this.cropFrameSize,r.getContext("2d").putImageData(e,0,0),"base64"===this.outType?(this.closeWaitingAni(),this.$emit("confirm-crop-image",r.toDataURL())):r.toBlob((t=>{this.closeWaitingAni(),this.$emit("confirm-crop-image",t)}),"image/jpg",1)},getImage(t){let e={x:parseInt(this.canvasWidth/2-(this.cropFrameSize-2)/2)+.5,y:parseInt(this.canvasHeight/2-(this.cropFrameSize-2)/2)+.5},r=this.ctx.getImageData(e.x,e.y,this.cropFrameSize-2,this.cropFrameSize-2),n=document.createElement("canvas");if(n.width=this.cropFrameSize,n.height=this.cropFrameSize,n.getContext("2d").putImageData(r,0,0),"base64"===this.outType)return this.closeWaitingAni(),n.toDataURL();this.closeWaitingAni(),n.toBlob(t,"image/jpg",1)},startWaitingAni(){this.waitingAni.start=!0,this.waitingAni.timer=setInterval((()=>{let t=this.waitingAni.colors[2];this.waitingAni.colors.splice(2,1),this.waitingAni.colors.unshift(t)}),250)},closeWaitingAni(){this.waitingAni.start=!1,clearInterval(this.waitingAni.timer)},draw(){if(!this.canvas||!this.img)return;this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.ctx.save(),this.position.x,this.imgNaturalWidth,this.scale,this.position.y,this.imgNaturalHeight,this.scale;let t=this.imgNaturalWidth*this.scale,e=this.imgNaturalHeight*this.scale;if(this.ctx.translate(this.position.x,this.position.y),this.ctx.rotate(this.rotateAngle*(Math.PI/180)),this.ctx.drawImage(this.img,-t/2,-e/2,t,e),this.ctx.restore(),this.drawCropFrame(),this.waitingAni.start)for(let t=0;t<this.waitingAni.colors.length;t++){let e,r;this.ctx.save(),this.ctx.fillStyle=this.waitingAni.colors[t],this.ctx.beginPath(),0===t?(e=this.canvasWidth/2-15,r=this.canvasHeight/2):1===t?(e=this.canvasWidth/2,r=this.canvasHeight/2):(e=this.canvasWidth/2+15,r=this.canvasHeight/2),this.ctx.arc(e,r,this.waitingAni.size,0,2*Math.PI,!0),this.ctx.fill(),this.ctx.restore()}this.AnimationFrameId=window.requestAnimationFrame(this.draw)}},mounted(){},beforeDestroy(){this.wt.dispose(),window.removeEventListener("touchmove",this.forbidPageScale),window.cancelAnimationFrame(this.AnimationFrameId),this._disposeScale(),this._disposeTranslate(),!this.is_pc()&&this._disposeRotate(),this.closeWaitingAni()}},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"meImageCrop",staticClass:"me-image-crop"},[r("canvas",{staticClass:"me-image-crop-canvas"}),t._v(" "),r("div",{staticClass:"me-image-crop-btns",style:{top:t.buttonTop+"px",right:t.buttonRight+"px"}},[t.showBtn&&t.is_pc()?r("div",{staticClass:"me-image-crop-btn me-image-crop-btn-rotate"},[t._t("rotate",(function(){return[r("span",{staticClass:"me-icon me-icon-rotate2",style:{fontSize:t.buttonSize+"px",color:"#DAA520"},attrs:{alt:""}})]}))],2):t._e(),t._v(" "),t.showBtn?r("div",{staticClass:"me-image-crop-btn",on:{click:t.cancelCrop}},[t._t("cancel",(function(){return[r("span",{staticClass:"me-icon me-icon-cancel",style:{fontSize:t.buttonSize+"px",color:"#E56149"},attrs:{alt:""}})]}))],2):t._e(),t._v(" "),t.showBtn?r("div",{staticClass:"me-image-crop-btn",on:{click:t.confirmCrop}},[t._t("confirm",(function(){return[r("span",{staticClass:"me-icon me-icon-sure",style:{fontSize:t.buttonSize+"px",color:"#45C189"},attrs:{alt:""}})]}))],2):t._e()])])})).exports;t.install=function(e){e.component(t.name,t)};const e=t})(),module.exports=n})();